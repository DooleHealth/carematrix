{"version":3,"sources":["webpack:///src/app/pages/profile/report-problem/report-problem.page.ts","webpack:///src/app/pages/profile/report-problem/report-problem.module.ts","webpack:///src/app/pages/profile/report-problem/report-problem-routing.module.ts","webpack:///src/app/pages/profile/report-problem/report-problem.page.scss","webpack:///src/app/pages/profile/report-problem/report-problem.page.html"],"names":["Camera","ReportProblemPage","translate","router","dooleService","chooser","sanitizer","fb","platform","file","loadingController","alertController","patient_files","numFile","mediaFiles","images","mimes","imagesTemp","form","group","category","description","required","getFile","then","push","name","dataURI","split","type","mediaType","error","console","source","getPhoto","quality","allowEditing","resultType","DataUrl","e","log","image","fileUri","convertFileSrc","dataUrl","filename","Date","getTime","saveBase64","toString","format","patchValue","base64String","length","is","fileInput","nativeElement","click","addImage","Photos","event","eventObj","target","files","toBase64","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","Error","base64result","forEach","element","index","splice","res","saveFile","create","loading","present","get","value","setValue","postAPIReportProblem","subscribe","data","success","presentAlert","instant","dismiss","invalid","valid","presentAlertConfirm","navigateByUrl","cssClass","header","message","buttons","text","role","handler","blah","alert","backdropDismiss","uploadFile","isSuccess","err","base64","realData","blob","b64toBlob","writeFile","cacheDirectory","b64Data","contentType","sliceSize","byteCharacters","atob","byteArrays","offset","slice","byteNumbers","Array","i","charCodeAt","byteArray","Uint8Array","Blob","selector","template","providers","ReportProblemPageModule","imports","declarations","routes","path","component","ReportProblemPageRoutingModule","forChild","exports"],"mappings":"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","file":"report-problem-report-problem-module-es5.js","sourcesContent":["import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { Chooser } from '@ionic-native/chooser/ngx';\nimport { TranslateService } from '@ngx-translate/core';\nimport { DooleService } from 'src/app/services/doole.service';\nimport { CameraResultType, CameraSource, Capacitor, Plugins } from '@capacitor/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';\nimport { AlertController, LoadingController, Platform } from '@ionic/angular';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { Router } from '@angular/router';\nimport { File } from '@ionic-native/file/ngx';\n\nconst { Camera } = Plugins;\n@Component({\n  selector: 'app-report-problem',\n  templateUrl: './report-problem.page.html',\n  styleUrls: ['./report-problem.page.scss'],\n  providers: [Chooser],\n})\nexport class ReportProblemPage implements OnInit {\n  @ViewChild('fileInput', { static: false }) fileInput: ElementRef;\n  patient_files: Array<{ name: string, file: string, type: string }> = [];\n  form: FormGroup;\n  //file: any;\n  file64: SafeResourceUrl;\n  numFile = 0;\n  mediaFiles: any = [];\n  private images : any = [];\n  private mimes : any = [];\n  private imagesTemp : any = [];\n  constructor(\n    private translate: TranslateService,\n    public router: Router,\n    private dooleService: DooleService,\n    private chooser: Chooser,\n    private sanitizer: DomSanitizer,\n    private fb: FormBuilder,\n    public platform: Platform,\n    public file: File,\n    private loadingController: LoadingController,\n    private alertController: AlertController,\n  ) { }\n\n  ngOnInit() {\n    this.form = this.fb.group({\n      category: [''],\n      description: ['', [Validators.required]],\n      //images:[this.images]\n      images:[]\n    });\n  }\n\n   async addFile() {\n    this.chooser.getFile().then(async file => {\n      //console.log(file ? file : 'canceled');\n      if (file) {\n        //console.log(\"file\", file);\n        //console.log(\" base64result.split(',')[1] \", file.dataURI.split(',')[1]);\n        this.patient_files.push({ name: file.name, file: file.dataURI.split(',')[1], type: file.mediaType })\n\n      }\n    }).catch((error: any) => {\n      console.error(error)\n    });\n  }\n\n    async addImage(source: CameraSource) {\n    const image = await Camera.getPhoto({\n      quality: 60,\n      allowEditing: false,\n      resultType: CameraResultType.DataUrl,\n      source\n    }).catch((e) => {\n      console.log('cancelled');\n\n    });\n\n    if (image) {\n      console.log(\"image: \", image);\n      var fileUri = Capacitor.convertFileSrc(image.dataUrl);\n      var filename=new Date().getTime();\n      this.saveBase64(fileUri,filename.toString()).then((file)=>{\n        this.patient_files.push({ name: filename + '.' + image.format, file: file, type: image.format })\n        this.form.patchValue({\n          images: 'data:' + `image/${image.format}` + ';base64,' + image.base64String\n        });\n        this.numFile = this.patient_files.length;\n      })\n\n    }\n  } \n\n/*    async addImage(source: CameraSource) {\n    const image = await Camera.getPhoto({\n      quality: 60,\n      allowEditing: false,\n      resultType: CameraResultType.DataUrl,\n      source\n    });\n\n    if(image){\n      console.log(\"image: \", image);\n      var fileUri = Capacitor.convertFileSrc(image.dataUrl);\n      console.log(\"addImage - savePicture fileUri: \", fileUri);\n\n      this.images.push(fileUri)\n      this.patient_files.push({ name: Date.now() + '.' + image.format, file: fileUri, type: image.format })\n      this.form.patchValue({\n        images: 'data:' + `image/${image.format}` + ';base64,' + image.base64String\n      });\n      this.numFile = this.patient_files.length;\n\n    }else{\n      console.log(\"no image\");\n    }\n  }  */\n\n  async selectImageSource(){\n    // Only allow file selection inside a browser\n    if (!this.platform.is('hybrid')) {\n      this.fileInput.nativeElement.click();\n    }else{\n      this.addImage(CameraSource.Photos);\n    }\n  }\n\n  async uploadFileFromBrowser(event: EventTarget) {\n    const eventObj: MSInputMethodContext = event as MSInputMethodContext;\n    const target: HTMLInputElement = eventObj.target as HTMLInputElement;\n    const file = target.files[0];\n    \n    const toBase64 = file => new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => resolve(reader.result);\n      reader.onerror = error => reject(error);\n    });\n    const result = await toBase64(file).catch(e => Error(e));\n    \n    var base64result = result as string;\n    //console.log(\" base64result.split(',')[1] \", base64result.split(',')[1]);\n    this.images.push(base64result)\n    this.patient_files.push({ name: file.name, file: base64result, type: file.type })\n        this.numFile = this.patient_files.length;\n    this.form.patchValue({\n      images: result\n    });\n    \n\n  }\n\n  openFile(file){\n    console.log(\"[ReportProblemPage] openFile: \", file);\n  }\n\n\n  removeFile(name: string) {\n    console.log(\"[ReportProblemPage] removeFile: \", name);\n    this.patient_files.forEach((element, index) => {\n      if (element.name == name)\n        this.patient_files.splice(index, 1);\n    });\n    this.numFile = this.patient_files.length;\n  }\n\n  async submit(){\n    let res = this.patient_files[0].file\n    console.log(\"[ReportProblemPage] submit()\", res);\n    \n     if (this.platform.is('hybrid')){\n      await this.saveFile(res)\n    }\n\n  }\n\n    // Save new diagnostic test\n  async sendProblemReport(){\n      console.log('[ReportProblemPage] sendProblemReport()');\n      const loading = await this.loadingController.create();\n      await loading.present();\n  \n      let category = this.form.get('category').value; \n      this.form.get('category').setValue(category);\n  \n      let description = this.form.get('description').value\n      this.form.get('description').setValue(description);\n\n/*       this.patient_files.forEach(item => {\n        this.images.push(item.file);   \n      }); */\n  \n      console.log(\"data:\", this.images);\n      this.dooleService.postAPIReportProblem(/* this.form.value */\n        this.images[0]\n        ).subscribe(\n          async (data) => {\n            console.log(\"data:\", data);\n\n            if(data.success)\n            this.presentAlert(this.translate.instant(\"report_problem.alert_successful_response\"));\n            \n          },\n          (error) => {\n            // Called when error\n            loading.dismiss();\n            console.log(\"error: \", error);\n            throw new HttpErrorResponse(error);\n          },\n          () => {\n            // Called when operation is complete (both success and error)\n            loading.dismiss();\n          });\n    }\n\n\n    enableButtonAddFile(){\n      if(this.patient_files.length >= 6 || this.form.invalid){\n          return true;\n      }\n      return false\n    }\n\n    goBacktoProfile(){\n      if(this.form.valid \n        || this.form.get('images').value.length > 0\n        || this.form.get('category').value.length > 0){\n        console.log(\"[ReportProblemPage] goBacktoProfile()\", this.form.value);\n        this.presentAlertConfirm();\n      }else{\n          this.router.navigateByUrl('/profile')\n      }\n    }\n\n    async presentAlertConfirm() {\n      const alert = await this.alertController.create({\n        cssClass: 'my-alert-class',\n        header: this.translate.instant(\"report_problem.title_report_problem\"),\n        message: this.translate.instant(\"report_problem.alert_confirm_exit\"),\n        buttons: [\n          {\n            text: this.translate.instant(\"alert.button_cancel\"),\n            role: 'cancel',\n            cssClass: 'secondary',\n            handler: (blah) => {\n              console.log('Confirm Cancel: blah');\n            }\n          }, {\n            text: this.translate.instant(\"alert.button_ok\"),\n            handler: () => {\n              console.log('Confirm Okay');\n              this.router.navigateByUrl('/profile')\n            }\n          }\n        ]\n      });\n  \n      await alert.present();\n    }\n\n\n    async presentAlert(message) {\n      const alert = await this.alertController.create({\n        cssClass: 'my-alert-class',\n        message: message,\n        buttons: [{\n          text: this.translate.instant(\"alert.button_ok\"),\n          handler: () => {\n            console.log('Confirm Okay');\n            this.router.navigateByUrl('/profile');\n          }\n        }],\n        backdropDismiss: false\n      });\n  \n      await alert.present();\n    }\n\n    async saveFile(data){\n      this.dooleService.uploadFile(data).then( res =>{\n        let isSuccess = (res as any).success\n        if(isSuccess)\n        this.presentAlert(this.translate.instant(\"report_problem.alert_successful_response\"));\n        else\n        this.presentAlert(this.translate.instant(\"report_problem.alert_no_successful_response\"));\n      }).catch(err => {\n        console.log(\"Error uploadFile: \", err);\n        this.presentAlert(err);\n      }).finally(() => {\n        //loading.dismiss();\n      })\n    }\n\n    async savePicture(fileUri){\n      console.log(\"[ReportProblemPage] savePicture() fileUri: \",fileUri);\n      //const loading = await this.loadingController.create();\n      //await loading.present();\n      var filename=new Date().getTime();\n      this.saveBase64(fileUri,filename.toString()).then(res => {\n        console.log(\"savePicture() saveBase64 res: \",res);\n        this.dooleService.uploadFile(res).then(data => {\n          console.log(\"savePicture() uploadFile res: \",res);\n          this.mediaFiles.push(data);\n          this.imagesTemp.push(data);\n          console.log(\"savePicture() this.mediafiles.: \", this.mediaFiles);\n          //loading.dismiss();\n        }).catch(err => {\n          console.log(\"Error uploadFile: \", err);\n          //loading.dismiss();\n        }).finally(() => {\n          //loading.dismiss();\n        })\n       \n      });\n  \n    }\n\n\n    public saveBase64(base64:string, name:string):Promise<string>{\n      return new Promise((resolve, reject)=>{\n        var realData = base64.split(\",\")[1]\n        let blob=this.b64toBlob(realData, 'image/jpeg');\n  \n        this.file.writeFile(this.file.cacheDirectory, name, blob)\n        .then(()=>{\n          resolve(this.file.cacheDirectory+name);\n        })\n        .catch((err)=>{\n          console.log(err);\n          console.log('error writing blob');\n          reject(err);\n        })\n      })\n    }\n  \n    b64toBlob(b64Data, contentType) {\n      contentType = contentType || '';\n      var sliceSize = 512;\n      var byteCharacters = atob(b64Data);\n      var byteArrays = [];\n  \n      for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n          var slice = byteCharacters.slice(offset, offset + sliceSize);\n          var byteNumbers = new Array(slice.length);\n          for (var i = 0; i < slice.length; i++) {\n              byteNumbers[i] = slice.charCodeAt(i);\n          }\n          var byteArray = new Uint8Array(byteNumbers);\n          byteArrays.push(byteArray);\n      }\n  \n    var blob = new Blob(byteArrays, {type: contentType});\n    console.log(\"this is bob: \", blob);\n    return blob;\n    }\n\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ReportProblemPageRoutingModule } from './report-problem-routing.module';\n\nimport { ReportProblemPage } from './report-problem.page';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { ComponentsModule } from 'src/app/components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    TranslateModule,\n    ReactiveFormsModule,\n    ComponentsModule,\n    ReportProblemPageRoutingModule\n  ],\n  declarations: [ReportProblemPage]\n})\nexport class ReportProblemPageModule {}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ReportProblemPage } from './report-problem.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ReportProblemPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ReportProblemPageRoutingModule {}\n","export default \"#container * {\\n  margin: 0;\\n  padding: 0;\\n}\\n\\n#container {\\n  width: 100%;\\n}\\n\\n#left,\\n#middle,\\n#right {\\n  display: inline-block;\\n  *display: inline;\\n  zoom: 1;\\n  vertical-align: top;\\n}\\n\\n#left {\\n  width: 10%;\\n}\\n\\n#middle {\\n  vertical-align: bottom;\\n  width: 75%;\\n}\\n\\n#right {\\n  vertical-align: bottom;\\n  width: 10%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3JlcG9ydC1wcm9ibGVtLnBhZ2Uuc2NzcyIsInJlcG9ydC1wcm9ibGVtLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLFNBQUE7RUFDQSxVQUFBO0FBQ0o7O0FBQ0U7RUFDRSxXQUFBO0FBRUo7O0FBQ0U7OztFQUdFLHFCQUFBO0dDRUYsZURERTtFQUNBLE9BQUE7RUFDQSxtQkFBQTtBQUVKOztBQUFFO0VBQ0UsVUFBQTtBQUdKOztBQURFO0VBQ0Usc0JBQUE7RUFDQSxVQUFBO0FBSUo7O0FBRkU7RUFDRSxzQkFBQTtFQUNBLFVBQUE7QUFLSiIsImZpbGUiOiJyZXBvcnQtcHJvYmxlbS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjY29udGFpbmVyICoge1xuICAgIG1hcmdpbjogMDtcbiAgICBwYWRkaW5nOiAwO1xuICB9XG4gICNjb250YWluZXIge1xuICAgIHdpZHRoOiAxMDAlO1xuICBcbiAgfVxuICAjbGVmdCxcbiAgI21pZGRsZSxcbiAgI3JpZ2h0IHtcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgKmRpc3BsYXk6IGlubGluZTtcbiAgICB6b29tOiAxO1xuICAgIHZlcnRpY2FsLWFsaWduOiB0b3A7XG4gIH1cbiAgI2xlZnQge1xuICAgIHdpZHRoOiAxMCU7XG4gIH1cbiAgI21pZGRsZSB7XG4gICAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcbiAgICB3aWR0aDogNzUlO1xuICB9XG4gICNyaWdodCB7XG4gICAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcbiAgICB3aWR0aDogMTAlO1xuICB9IiwiI2NvbnRhaW5lciAqIHtcbiAgbWFyZ2luOiAwO1xuICBwYWRkaW5nOiAwO1xufVxuXG4jY29udGFpbmVyIHtcbiAgd2lkdGg6IDEwMCU7XG59XG5cbiNsZWZ0LFxuI21pZGRsZSxcbiNyaWdodCB7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgKmRpc3BsYXk6IGlubGluZTtcbiAgem9vbTogMTtcbiAgdmVydGljYWwtYWxpZ246IHRvcDtcbn1cblxuI2xlZnQge1xuICB3aWR0aDogMTAlO1xufVxuXG4jbWlkZGxlIHtcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcbiAgd2lkdGg6IDc1JTtcbn1cblxuI3JpZ2h0IHtcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcbiAgd2lkdGg6IDEwJTtcbn0iXX0= */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-button slot=\\\"start\\\" fill=\\\"clear\\\" (click)=\\\"goBacktoProfile()\\\">{{'alert.button_cancel' | translate }}\\n     <!--  <ion-back-button icon=\\\"\\\" text=\\\"\\\" ></ion-back-button> -->\\n    </ion-button>\\n    <ion-title>{{'report_problem.title_report_problem' | translate }}</ion-title>\\n    <ion-button slot=\\\"end\\\" fill=\\\"clear\\\" (click)=\\\"submit()\\\">\\n      {{'report_problem.button_send' | translate }}\\n    </ion-button>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-card class=\\\"cardProfile\\\">\\n    <form (ngSubmit)=\\\"submit()\\\" [formGroup]=\\\"form\\\">\\n    <ion-list>\\n      <ion-item>\\n        <ion-label>{{'report_problem.subtitle_category' | translate }}</ion-label>\\n        <ion-icon name=\\\"chevron-forward-outline\\\" slot=\\\"end\\\" size=\\\"small\\\"></ion-icon>\\n        <ion-input formControlName=\\\"category\\\"></ion-input>\\n      </ion-item>\\n      <ion-item >\\n        <ion-label>{{'report_problem.subtitle_description' | translate }}</ion-label>\\n        <ion-textarea\\n        formControlName=\\\"description\\\"\\n      ></ion-textarea>       \\n      </ion-item>\\n      <ion-item lines=\\\"none\\\" >\\n        <ion-label>{{'report_problem.subtitle_screenshot' | translate }}</ion-label>\\n        <ion-label slot=\\\"end\\\">{{this.numFile}}/6</ion-label>\\n      </ion-item>\\n      <ion-item lines=\\\"none\\\">\\n        <ion-label>{{'report_problem.description_screenshot' | translate }}</ion-label>\\n      </ion-item>\\n      <ion-item lines=\\\"none\\\" *ngIf=\\\"this.patient_files.length > 0\\\">\\n        <div id=\\\"container\\\" style=\\\"margin-top: 10px;\\\">\\n          <div *ngFor=\\\"let file of this.patient_files\\\">\\n            <!-- <ion-card class=\\\"cardProfile\\\"> -->\\n              <div id=\\\"left\\\">\\n                <ion-icon name=\\\"open\\\" color=\\\"primary\\\" (click)=\\\"openFile(file)\\\"></ion-icon>\\n              </div>\\n              <div id=\\\"middle\\\">\\n                <p class=\\\"titule\\\">{{ file.name }}</p>\\n              </div>\\n              <div id=\\\"right\\\">\\n                <ion-icon name=\\\"close-circle\\\" color=\\\"primary\\\" (click)=\\\"removeFile(file.name)\\\"></ion-icon>\\n              </div> \\n          <!-- </ion-card> -->\\n          </div>       \\n        </div>\\n      </ion-item>\\n      <input\\n      type=\\\"file\\\"\\n      #fileInput\\n      (change)=\\\"uploadFileFromBrowser($event)\\\"\\n      hidden=\\\"true\\\"\\n      accept=\\\"image/*\\\">\\n\\n      <ion-button slot=\\\"start\\\" \\n      fill=\\\"clear\\\" \\n      (click)=\\\"selectImageSource()\\\"\\n      [disabled]=\\\"enableButtonAddFile()\\\">{{'report_problem.button_add_file' | translate }}\\n      </ion-button>\\n    </ion-list>\\n  </form>\\n  </ion-card>\\n</ion-content>\\n\";"]}