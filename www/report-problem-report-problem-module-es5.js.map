{"version":3,"sources":["webpack:///src/app/pages/profile/report-problem/report-problem.page.ts","webpack:///src/app/pages/profile/report-problem/report-problem.module.ts","webpack:///src/app/pages/profile/report-problem/report-problem-routing.module.ts","webpack:///src/app/pages/profile/report-problem/report-problem.page.scss","webpack:///src/app/pages/profile/report-problem/report-problem.page.html"],"names":["Camera","ReportProblemPage","translate","router","dooleService","fb","platform","file","loadingController","alertController","patient_files","numFile","images","form","group","category","description","required","source","getPhoto","quality","allowEditing","resultType","DataUrl","e","console","log","image","fileUri","convertFileSrc","dataUrl","filename","Date","now","saveBase64","toString","then","push","name","format","type","patchValue","base64String","length","is","fileInput","nativeElement","click","addImage","Photos","event","eventObj","target","files","toBase64","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","Error","base64result","forEach","element","index","splice","res","saveFile","create","loading","present","get","value","setValue","item","postAPIReportProblem","subscribe","data","success","presentAlert","instant","dismiss","invalid","valid","presentAlertConfirm","navigateByUrl","cssClass","header","message","buttons","text","role","handler","blah","alert","backdropDismiss","uploadFile","isSuccess","err","getTime","base64","realData","split","blob","b64toBlob","writeFile","cacheDirectory","b64Data","contentType","sliceSize","byteCharacters","atob","byteArrays","offset","slice","byteNumbers","Array","i","charCodeAt","byteArray","Uint8Array","Blob","selector","template","providers","ReportProblemPageModule","imports","declarations","routes","path","component","ReportProblemPageRoutingModule","forChild","exports"],"mappings":"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","file":"report-problem-report-problem-module-es5.js","sourcesContent":["import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { Chooser } from '@ionic-native/chooser/ngx';\nimport { TranslateService } from '@ngx-translate/core';\nimport { DooleService } from 'src/app/services/doole.service';\nimport { CameraResultType, CameraSource, Capacitor, Plugins } from '@capacitor/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';\nimport { AlertController, LoadingController, Platform } from '@ionic/angular';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { Router } from '@angular/router';\nimport { File } from '@ionic-native/file/ngx';\n\nconst { Camera } = Plugins;\n@Component({\n  selector: 'app-report-problem',\n  templateUrl: './report-problem.page.html',\n  styleUrls: ['./report-problem.page.scss'],\n  providers: [Chooser],\n})\nexport class ReportProblemPage implements OnInit {\n  @ViewChild('fileInput', { static: false }) fileInput: ElementRef;\n  patient_files: Array<{ name: string, file: string, type: string }> = [];\n  form: FormGroup;\n  //file: any;\n  //file64: SafeResourceUrl;\n  numFile = 0;\n  private images : any = [];\n\n  constructor(\n    private translate: TranslateService,\n    public router: Router,\n    private dooleService: DooleService,\n    //private chooser: Chooser,\n    //private sanitizer: DomSanitizer,\n    private fb: FormBuilder,\n    public platform: Platform,\n    public file: File,\n    private loadingController: LoadingController,\n    private alertController: AlertController,\n  ) { }\n\n  ngOnInit() {\n    this.form = this.fb.group({\n      category: [''],\n      description: ['', [Validators.required]],\n      images:[this.images]\n    });\n  }\n\n    async addImage(source: CameraSource) {\n    const image = await Camera.getPhoto({\n      quality: 60,\n      allowEditing: false,\n      resultType: CameraResultType.DataUrl,\n      source\n    }).catch((e) => {\n      console.log('cancelled');\n\n    });\n\n    if (image) {\n      console.log(\"image: \", image);\n      var fileUri = Capacitor.convertFileSrc(image.dataUrl);\n      var filename= Date.now() //new Date().getTime(); \n      this.saveBase64(fileUri,filename.toString()).then((file)=>{\n        this.patient_files.push({ name: filename + '.' + image.format, file: file, type: image.format })\n        this.form.patchValue({\n          images: 'data:' + `image/${image.format}` + ';base64,' + image.base64String\n        });\n        this.numFile = this.patient_files.length;\n      })\n\n    }\n  } \n\n/*    async addImage(source: CameraSource) {\n    const image = await Camera.getPhoto({\n      quality: 60,\n      allowEditing: false,\n      resultType: CameraResultType.DataUrl,\n      source\n    });\n\n    if(image){\n      console.log(\"image: \", image);\n      var fileUri = Capacitor.convertFileSrc(image.dataUrl);\n      console.log(\"addImage - savePicture fileUri: \", fileUri);\n\n      this.images.push(fileUri)\n      this.patient_files.push({ name: Date.now() + '.' + image.format, file: fileUri, type: image.format })\n      this.form.patchValue({\n        images: 'data:' + `image/${image.format}` + ';base64,' + image.base64String\n      });\n      this.numFile = this.patient_files.length;\n\n    }else{\n      console.log(\"no image\");\n    }\n  }  */\n\n  async selectImageSource(){\n    // Only allow file selection inside a browser\n    if (!this.platform.is('hybrid')) {\n      this.fileInput.nativeElement.click();\n    }else{\n      this.addImage(CameraSource.Photos);\n    }\n  }\n\n  async uploadFileFromBrowser(event: EventTarget) {\n    const eventObj: MSInputMethodContext = event as MSInputMethodContext;\n    const target: HTMLInputElement = eventObj.target as HTMLInputElement;\n    const file = target.files[0];\n    \n    const toBase64 = file => new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => resolve(reader.result);\n      reader.onerror = error => reject(error);\n    });\n    const result = await toBase64(file).catch(e => Error(e));\n    \n    var base64result = result as string;\n    //console.log(\" base64result.split(',')[1] \", base64result.split(',')[1]);\n    this.images.push(base64result)\n    this.patient_files.push({ name: file.name, file: base64result, type: file.type })\n        this.numFile = this.patient_files.length;\n    this.form.patchValue({\n      images: result\n    });\n    \n\n  }\n\n  openFile(file){\n    console.log(\"[ReportProblemPage] openFile: \", file);\n  }\n\n\n  removeFile(name: string) {\n    console.log(\"[ReportProblemPage] removeFile: \", name);\n    this.patient_files.forEach((element, index) => {\n      if (element.name == name)\n        this.patient_files.splice(index, 1);\n    });\n    this.numFile = this.patient_files.length;\n  }\n\n  async submit(){\n    let res = this.patient_files[0].file\n    console.log(\"[ReportProblemPage] submit()\", res);\n    \n     if (this.platform.is('hybrid')){\n      await this.saveFile(res)\n    }\n\n  }\n\n    // Save new diagnostic test\n  async sendProblemReport(){\n      console.log('[ReportProblemPage] sendProblemReport()');\n      const loading = await this.loadingController.create();\n      await loading.present();\n  \n      let category = this.form.get('category').value; \n      this.form.get('category').setValue(category);\n  \n      let description = this.form.get('description').value\n      this.form.get('description').setValue(description);\n\n      this.patient_files.forEach(item => {\n        this.images.push(item.file);   \n      });\n      this.form.get('images').setValue(this.images);\n  \n      console.log(\"data:\", this.images);\n      this.dooleService.postAPIReportProblem(/* this.form.value */\n        this.images[0]\n        ).subscribe(\n          async (data) => {\n            console.log(\"data:\", data);\n\n            if(data.success)\n            this.presentAlert(this.translate.instant(\"report_problem.alert_successful_response\"));\n            \n          },\n          (error) => {\n            // Called when error\n            loading.dismiss();\n            console.log(\"error: \", error);\n            throw new HttpErrorResponse(error);\n          },\n          () => {\n            // Called when operation is complete (both success and error)\n            loading.dismiss();\n          });\n    }\n\n\n    enableButtonAddFile(){\n      if(this.patient_files.length >= 6 || this.form.invalid){\n          return true;\n      }\n      return false\n    }\n\n    goBacktoProfile(){\n      if(this.form.valid \n        || this.form.get('images').value.length > 0\n        || this.form.get('category').value.length > 0){\n        console.log(\"[ReportProblemPage] goBacktoProfile()\", this.form.value);\n        this.presentAlertConfirm();\n      }else{\n          this.router.navigateByUrl('/profile')\n      }\n    }\n\n    async presentAlertConfirm() {\n      const alert = await this.alertController.create({\n        cssClass: 'my-alert-class',\n        header: this.translate.instant(\"report_problem.title_report_problem\"),\n        message: this.translate.instant(\"report_problem.alert_confirm_exit\"),\n        buttons: [\n          {\n            text: this.translate.instant(\"alert.button_cancel\"),\n            role: 'cancel',\n            cssClass: 'secondary',\n            handler: (blah) => {\n              console.log('Confirm Cancel: blah');\n            }\n          }, {\n            text: this.translate.instant(\"alert.button_ok\"),\n            handler: () => {\n              console.log('Confirm Okay');\n              this.router.navigateByUrl('/profile')\n            }\n          }\n        ]\n      });\n  \n      await alert.present();\n    }\n\n\n    async presentAlert(message) {\n      const alert = await this.alertController.create({\n        cssClass: 'my-alert-class',\n        message: message,\n        buttons: [{\n          text: this.translate.instant(\"alert.button_ok\"),\n          handler: () => {\n            console.log('Confirm Okay');\n            this.router.navigateByUrl('/profile');\n          }\n        }],\n        backdropDismiss: false\n      });\n  \n      await alert.present();\n    }\n\n    async saveFile(data){\n      const loading = await this.loadingController.create();\n      await loading.present();\n      this.dooleService.uploadFile(data).then( res =>{\n        let isSuccess = (res as any).success\n        if(isSuccess)\n        this.presentAlert(this.translate.instant(\"report_problem.alert_successful_response\"));\n        else\n        this.presentAlert(this.translate.instant(\"report_problem.alert_no_successful_response\"));\n      }).catch(err => {\n        console.log(\"Error uploadFile: \", err);\n        loading.dismiss();\n        this.presentAlert(err);\n      }).finally(() => {\n        loading.dismiss();\n      })\n    }\n\n    async savePicture(fileUri){\n      console.log(\"[ReportProblemPage] savePicture() fileUri: \",fileUri);\n      //const loading = await this.loadingController.create();\n      //await loading.present();\n      var filename=new Date().getTime();\n      this.saveBase64(fileUri,filename.toString()).then(res => {\n        console.log(\"savePicture() saveBase64 res: \",res);\n        this.dooleService.uploadFile(res).then(data => {\n          console.log(\"savePicture() uploadFile res: \",res);\n          //loading.dismiss();\n        }).catch(err => {\n          console.log(\"Error uploadFile: \", err);\n          //loading.dismiss();\n        }).finally(() => {\n          //loading.dismiss();\n        })\n       \n      });\n  \n    }\n\n\n    public saveBase64(base64:string, name:string):Promise<string>{\n      return new Promise((resolve, reject)=>{\n        var realData = base64.split(\",\")[1]\n        let blob=this.b64toBlob(realData, 'image/jpeg');\n  \n        this.file.writeFile(this.file.cacheDirectory, name, blob)\n        .then(()=>{\n          resolve(this.file.cacheDirectory+name);\n        })\n        .catch((err)=>{\n          console.log(err);\n          console.log('error writing blob');\n          reject(err);\n        })\n      })\n    }\n  \n    b64toBlob(b64Data, contentType) {\n      contentType = contentType || '';\n      var sliceSize = 512;\n      var byteCharacters = atob(b64Data);\n      var byteArrays = [];\n  \n      for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n          var slice = byteCharacters.slice(offset, offset + sliceSize);\n          var byteNumbers = new Array(slice.length);\n          for (var i = 0; i < slice.length; i++) {\n              byteNumbers[i] = slice.charCodeAt(i);\n          }\n          var byteArray = new Uint8Array(byteNumbers);\n          byteArrays.push(byteArray);\n      }\n  \n    var blob = new Blob(byteArrays, {type: contentType});\n    console.log(\"this is bob: \", blob);\n    return blob;\n    }\n\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ReportProblemPageRoutingModule } from './report-problem-routing.module';\n\nimport { ReportProblemPage } from './report-problem.page';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { ComponentsModule } from 'src/app/components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    TranslateModule,\n    ReactiveFormsModule,\n    ComponentsModule,\n    ReportProblemPageRoutingModule\n  ],\n  declarations: [ReportProblemPage]\n})\nexport class ReportProblemPageModule {}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ReportProblemPage } from './report-problem.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ReportProblemPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ReportProblemPageRoutingModule {}\n","export default \"#container * {\\n  margin: 0;\\n  padding: 0;\\n}\\n\\n#container {\\n  width: 100%;\\n}\\n\\n#left,\\n#middle,\\n#right {\\n  display: inline-block;\\n  *display: inline;\\n  zoom: 1;\\n  vertical-align: top;\\n}\\n\\n#left {\\n  width: 10%;\\n}\\n\\n#middle {\\n  vertical-align: bottom;\\n  width: 75%;\\n}\\n\\n#right {\\n  vertical-align: bottom;\\n  width: 10%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3JlcG9ydC1wcm9ibGVtLnBhZ2Uuc2NzcyIsInJlcG9ydC1wcm9ibGVtLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLFNBQUE7RUFDQSxVQUFBO0FBQ0o7O0FBQ0U7RUFDRSxXQUFBO0FBRUo7O0FBQ0U7OztFQUdFLHFCQUFBO0dDRUYsZURERTtFQUNBLE9BQUE7RUFDQSxtQkFBQTtBQUVKOztBQUFFO0VBQ0UsVUFBQTtBQUdKOztBQURFO0VBQ0Usc0JBQUE7RUFDQSxVQUFBO0FBSUo7O0FBRkU7RUFDRSxzQkFBQTtFQUNBLFVBQUE7QUFLSiIsImZpbGUiOiJyZXBvcnQtcHJvYmxlbS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjY29udGFpbmVyICoge1xuICAgIG1hcmdpbjogMDtcbiAgICBwYWRkaW5nOiAwO1xuICB9XG4gICNjb250YWluZXIge1xuICAgIHdpZHRoOiAxMDAlO1xuICBcbiAgfVxuICAjbGVmdCxcbiAgI21pZGRsZSxcbiAgI3JpZ2h0IHtcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgKmRpc3BsYXk6IGlubGluZTtcbiAgICB6b29tOiAxO1xuICAgIHZlcnRpY2FsLWFsaWduOiB0b3A7XG4gIH1cbiAgI2xlZnQge1xuICAgIHdpZHRoOiAxMCU7XG4gIH1cbiAgI21pZGRsZSB7XG4gICAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcbiAgICB3aWR0aDogNzUlO1xuICB9XG4gICNyaWdodCB7XG4gICAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcbiAgICB3aWR0aDogMTAlO1xuICB9IiwiI2NvbnRhaW5lciAqIHtcbiAgbWFyZ2luOiAwO1xuICBwYWRkaW5nOiAwO1xufVxuXG4jY29udGFpbmVyIHtcbiAgd2lkdGg6IDEwMCU7XG59XG5cbiNsZWZ0LFxuI21pZGRsZSxcbiNyaWdodCB7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgKmRpc3BsYXk6IGlubGluZTtcbiAgem9vbTogMTtcbiAgdmVydGljYWwtYWxpZ246IHRvcDtcbn1cblxuI2xlZnQge1xuICB3aWR0aDogMTAlO1xufVxuXG4jbWlkZGxlIHtcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcbiAgd2lkdGg6IDc1JTtcbn1cblxuI3JpZ2h0IHtcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcbiAgd2lkdGg6IDEwJTtcbn0iXX0= */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-button slot=\\\"start\\\" fill=\\\"clear\\\" (click)=\\\"goBacktoProfile()\\\">{{'alert.button_cancel' | translate }}\\n     <!--  <ion-back-button icon=\\\"\\\" text=\\\"\\\" ></ion-back-button> -->\\n    </ion-button>\\n    <ion-title>{{'report_problem.title_report_problem' | translate }}</ion-title>\\n    <ion-button slot=\\\"end\\\" fill=\\\"clear\\\" (click)=\\\"submit()\\\">\\n      {{'report_problem.button_send' | translate }}\\n    </ion-button>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-card class=\\\"cardProfile\\\">\\n    <form (ngSubmit)=\\\"submit()\\\" [formGroup]=\\\"form\\\">\\n    <ion-list>\\n      <ion-item>\\n        <ion-label>{{'report_problem.subtitle_category' | translate }}</ion-label>\\n        <ion-icon name=\\\"chevron-forward-outline\\\" slot=\\\"end\\\" size=\\\"small\\\"></ion-icon>\\n        <ion-input formControlName=\\\"category\\\"></ion-input>\\n      </ion-item>\\n      <ion-item >\\n        <ion-label>{{'report_problem.subtitle_description' | translate }}</ion-label>\\n        <ion-textarea\\n        formControlName=\\\"description\\\"\\n      ></ion-textarea>       \\n      </ion-item>\\n      <ion-item lines=\\\"none\\\" >\\n        <ion-label>{{'report_problem.subtitle_screenshot' | translate }}</ion-label>\\n        <ion-label slot=\\\"end\\\">{{this.numFile}}/6</ion-label>\\n      </ion-item>\\n      <ion-item lines=\\\"none\\\">\\n        <ion-label>{{'report_problem.description_screenshot' | translate }}</ion-label>\\n      </ion-item>\\n      <ion-item lines=\\\"none\\\" *ngIf=\\\"this.patient_files.length > 0\\\">\\n        <div id=\\\"container\\\" style=\\\"margin-top: 10px;\\\">\\n          <div *ngFor=\\\"let file of this.patient_files\\\">\\n            <!-- <ion-card class=\\\"cardProfile\\\"> -->\\n              <div id=\\\"left\\\">\\n                <ion-icon name=\\\"open\\\" color=\\\"primary\\\" (click)=\\\"openFile(file)\\\"></ion-icon>\\n              </div>\\n              <div id=\\\"middle\\\">\\n                <p class=\\\"titule\\\">{{ file.name }}</p>\\n              </div>\\n              <div id=\\\"right\\\">\\n                <ion-icon name=\\\"close-circle\\\" color=\\\"primary\\\" (click)=\\\"removeFile(file.name)\\\"></ion-icon>\\n              </div> \\n          <!-- </ion-card> -->\\n          </div>       \\n        </div>\\n      </ion-item>\\n      <input\\n      type=\\\"file\\\"\\n      #fileInput\\n      (change)=\\\"uploadFileFromBrowser($event)\\\"\\n      hidden=\\\"true\\\"\\n      accept=\\\"image/*\\\">\\n\\n      <ion-button slot=\\\"start\\\" \\n      fill=\\\"clear\\\" \\n      (click)=\\\"selectImageSource()\\\"\\n      [disabled]=\\\"enableButtonAddFile()\\\">{{'report_problem.button_add_file' | translate }}\\n      </ion-button>\\n    </ion-list>\\n  </form>\\n  </ion-card>\\n</ion-content>\\n\";"]}