{"version":3,"sources":["webpack:///src/app/pages/login/sms/sms-routing.module.ts","webpack:///src/app/pages/login/sms/sms.page.scss","webpack:///src/app/pages/login/sms/sms.page.ts","webpack:///src/app/pages/login/sms/sms.module.ts","webpack:///src/app/pages/login/sms/sms.page.html"],"names":["routes","path","component","loadChildren","then","m","VerificationPageModule","SmsPageRoutingModule","imports","forChild","exports","Storage","SmsPage","router","translate","alertController","dooleService","COUNTRY_CODE","isSubmitted","telephone","required","minLength","console","log","value","invalid","presentAlertConfirm","telephoneTemp","create","cssClass","header","message","instant","buttons","text","role","handler","blah","sendTelephone","alert","present","postAPIsmsVerification","subscribe","res","isSuccess","success","saveTelephone","navigateByUrl","err","code","set","key","selector","template","SmsPageModule","declarations"],"mappings":"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","file":"sms-sms-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SmsPage } from './sms.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SmsPage\n  },\n  {\n    path: 'verification',\n    loadChildren: () => import('../verification/verification.module').then( m => m.VerificationPageModule)\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SmsPageRoutingModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzbXMucGFnZS5zY3NzIn0= */\";","import { Component, OnInit } from '@angular/core';\nimport { FormControl, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { AlertController } from '@ionic/angular';\nimport { TranslateService } from '@ngx-translate/core';\nimport { DooleService } from 'src/app/services/doole.service';\nimport { Plugins } from '@capacitor/core';\nconst { Storage } = Plugins;\n\n@Component({\n  selector: 'app-sms',\n  templateUrl: './sms.page.html',\n  styleUrls: ['./sms.page.scss'],\n})\nexport class SmsPage implements OnInit {\n  COUNTRY_CODE = \"+34\"\n  isSubmitted= false\n  telephone = new FormControl('', [Validators.required, Validators.minLength(9)]);\n  constructor(\n    public router: Router,    \n    private translate: TranslateService,\n    private alertController: AlertController,\n    private dooleService: DooleService\n  ) { }\n\n  ngOnInit() {\n  }\n\n  goVerification(){\n    console.log('[LegalPage] goVerification()', this.telephone.value);\n    this.isSubmitted = true\n    if(!this.telephone.invalid){\n      this.presentAlertConfirm()\n    }\n  }\n\n  async presentAlertConfirm() {\n    const telephoneTemp =  this.COUNTRY_CODE + this.telephone.value\n    const alert = await this.alertController.create({\n      cssClass: 'my-alert-class',\n      header: this.COUNTRY_CODE +\" \"+  this.telephone.value,\n      message: this.translate.instant(\"sms.alert_message\"),\n      buttons: [\n        {\n          text: this.translate.instant(\"sms.ko_button\"),\n          role: 'cancel',\n          cssClass: 'secondary',\n          handler: (blah) => {\n            console.log('Confirm Cancel: blah');\n          }\n        }, {\n          text: this.translate.instant(\"sms.ok_button\"),\n          handler: () => {\n            console.log('Confirm Okay');\n            this.sendTelephone(telephoneTemp);\n          }\n        }\n      ]\n    });\n\n    await alert.present();\n  }\n\n\n  sendTelephone(telephone){\n    this.dooleService.postAPIsmsVerification(telephone).subscribe(\n      async (res: any) =>{\n        console.log('[LegalPage] sendTelephone()', await res);\n        let  isSuccess = res.success \n        if(isSuccess){\n          this.saveTelephone()\n          this.router.navigateByUrl(\"verification\")\n        }else{\n          console.log('[LegalPage] sendTelephone() Unsuccessful response', await res);\n        }\n       },(err) => { \n          console.log('[LegalPage] sendTelephone() ERROR(' + err.code + '): ' + err.message); \n          throw err; \n      });\n  }\n\n  async saveTelephone(){\n    await Storage.set({\n     key: 'telephone',\n     value: this.COUNTRY_CODE + this.telephone.value\n   });\n   console.log(`[VerificationPage] saveTelephone()`);\n }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SmsPageRoutingModule } from './sms-routing.module';\n\nimport { SmsPage } from './sms.page';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReactiveFormsModule,\n    TranslateModule,\n    SmsPageRoutingModule\n  ],\n  declarations: [SmsPage]\n})\nexport class SmsPageModule {}\n","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button [text]=\\\"buttonText\\\" [icon]=\\\"buttonIcon\\\">\\n      </ion-back-button>\\n    </ion-buttons>\\n    <ion-title class=\\\"toolbarTitle\\\">{{ 'sms.header' | translate}}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content fullscreen>\\n  <div class=\\\"main-container\\\">\\n    <ion-grid>\\n      <h2 class=\\\"bold\\\">{{ 'sms.title' | translate}}</h2>\\n      <ion-text>{{ 'sms.text1' | translate}}</ion-text>\\n      <ion-col>\\n        <div style=\\\"padding-top: 15%;\\\">\\n          <ion-item-divider>  \\n            <span>+34 </span>          \\n            <ion-input type=\\\"tel-country-code\\\" (ionInput)=\\\"isSubmitted = false\\\" [formControl]=\\\"telephone\\\" maxlength=\\\"9\\\"  required></ion-input>\\n            <ion-label class=\\\"error ion-padding\\\" color=\\\"danger\\\" *ngIf=\\\"isSubmitted && this.telephone.hasError('required')\\\">\\n              {{ 'sms.error_required' | translate}}\\n            </ion-label>\\n            <ion-label class=\\\"error ion-padding\\\" color=\\\"danger\\\" *ngIf=\\\"isSubmitted && this.telephone.hasError('minlength')\\\">\\n              {{ 'sms.error_min_lenght' | translate}}\\n            </ion-label>\\n          </ion-item-divider>\\n          <ion-button type=\\\"button\\\" color=\\\"primary\\\" expand=\\\"block\\\" style=\\\"margin-top:15%;\\\" (click)=\\\"goVerification()\\\">\\n            {{ 'sms.next_button' | translate}}\\n          </ion-button>\\n          <div style=\\\"padding-top:5%;\\\">\\n            <ion-text>{{ 'sms.text2' | translate}}</ion-text>\\n          </div>\\n        </div>\\n      </ion-col>\\n    </ion-grid>\\n  </div>\\n</ion-content>\";"]}