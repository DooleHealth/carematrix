{"version":3,"sources":["webpack:///src/app/pages/login/landing/landing.page.html","webpack:///src/app/pages/login/landing/landing-routing.module.ts","webpack:///src/app/pages/login/landing/landing.page.scss","webpack:///src/app/pages/login/landing/landing.page.ts","webpack:///src/app/pages/login/landing/landing.module.ts"],"names":["routes","path","component","loadChildren","then","m","LegalPageModule","LandingPageRoutingModule","imports","forChild","exports","Storage","LandingPage","router","route","translate","loadingController","location","authService","alertController","ngZone","languageService","dooleService","loginForm","username","compose","required","password","redirectLoader","console","log","dismiss","submitError","run","navigate","text","instant","create","spinner","message","cssClass","backdropDismiss","loader","currentUrl","present","login","value","subscribe","res","dismissLoading","error","condicion","redirectLoggedUserToHomePage","data","set","key","postAPIpasswordRecovery","err","code","subHeader","inputs","name","type","placeholder","buttons","role","handler","blah","sendPassword","alert","selector","template","LandingPageModule","declarations"],"mappings":"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","file":"pages-login-landing-landing-module-es5.js","sourcesContent":["export default \"<ion-content fullscreen>\\n    <div class=\\\"main-container\\\">\\n        <img style=\\\"padding-top: 40%;\\\" src=\\\"/assets/images/logo.svg\\\" />\\n        <ion-grid>\\n            <ion-col>\\n                <form [formGroup]=\\\"loginForm\\\" (ngSubmit)=\\\"doDooleAppLogin()\\\">\\n                    <ion-item-divider>\\n                        <ion-icon name=\\\"person\\\"></ion-icon>\\n                        <ion-input type=\\\"text\\\" placeholder=\\\"{{'landing.user_placeholder' | translate }}\\\" formControlName=\\\"username\\\" >\\n                        </ion-input>\\n                    </ion-item-divider>\\n                    <ion-item-divider>\\n                        <ion-icon name=\\\"lock-closed\\\"></ion-icon>\\n                        <app-show-hide-password>\\n                            <ion-input type=\\\"password\\\" placeholder=\\\"{{'landing.password_placeholder' | translate }}\\\" formControlName=\\\"password\\\">\\n                            </ion-input>\\n                        </app-show-hide-password>\\n                    </ion-item-divider>\\n                    <ion-text (click)=\\\"passwordRecovery()\\\">\\n                        <a>{{ 'landing.password_recovery' | translate}}</a>\\n                    </ion-text>\\n                  \\n                    <!-- <ion-button type=\\\"submit\\\" color=\\\"primary\\\" expand=\\\"block\\\" class=\\\"enter-btn\\\" routerLink=\\\"legal\\\">\\n                        Iniciar sesi√≥n\\n                    </ion-button> -->\\n\\n                    <ion-button type=\\\"submit\\\" size=\\\"medium\\\" [disabled]=\\\"!loginForm.valid\\\"\\n                    color=\\\"primary\\\" expand=\\\"block\\\" class=\\\"enter-btn\\\">\\n                    {{ 'landing.button_signin' | translate}}</ion-button>\\n       \\n<!--                     <ion-button expand=\\\"block\\\" color=\\\"transparent\\\" class=\\\"buttonLink\\\">\\n                        {{ 'landing.button_registre' | translate}}\\n                    </ion-button> -->\\n                </form>\\n            </ion-col>\\n        </ion-grid>\\n    </div>\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LandingPage } from './landing.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LandingPage\n  },\n  {\n    path: 'legal',\n    loadChildren: () => import('../legal/legal.module').then( m => m.LegalPageModule)\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LandingPageRoutingModule {}\n","export default \".enter-btn {\\n  margin-top: 10%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL2xhbmRpbmcucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksZUFBQTtBQUNKIiwiZmlsZSI6ImxhbmRpbmcucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmVudGVyLWJ0bntcbiAgICBtYXJnaW4tdG9wOiAxMCU7XG59Il19 */\";","import { Component, NgZone, OnInit } from '@angular/core';\nimport { FormControl, FormGroup, Validators, ReactiveFormsModule } from '@angular/forms';\nimport { AlertController, LoadingController } from '@ionic/angular';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Location } from '@angular/common';\nimport { AuthenticationService } from 'src/app/services/authentication.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Plugins } from '@capacitor/core';\nimport { LanguageService } from 'src/app/services/language.service';\nimport { DooleService } from 'src/app/services/doole.service';\nconst { Storage } = Plugins;\n\n\n@Component({\n  selector: 'app-landing',\n  templateUrl: './landing.page.html',\n  styleUrls: ['./landing.page.scss'],\n})\nexport class LandingPage implements OnInit {\n  loginForm: FormGroup;\n  submitError: string;\n  redirectLoader: HTMLIonLoadingElement;\n\n  constructor(\n    private router: Router,\n    public route: ActivatedRoute,\n    private translate: TranslateService,\n    public loadingController: LoadingController,\n    public location: Location,\n    private authService: AuthenticationService,\n    public alertController: AlertController,\n    private ngZone: NgZone,\n    public languageService: LanguageService,\n    private dooleService: DooleService\n  ) {\n    this.loginForm = new FormGroup({\n      username: new FormControl('', \n      Validators.compose([\n        Validators.required\n      ])),\n      password: new FormControl('',\n        Validators.compose([\n        Validators.required])\n      )\n    });\n   }\n\n  ngOnInit() {\n  }\n\n\n  async dismissLoading() {\n   \n    if (this.redirectLoader) {\n      console.log(\"dismissLoading\");\n      this.redirectLoader.dismiss();\n    }\n  }\n\n\n\n  resetSubmitError() {\n    this.submitError = null;\n  }\n\n    // Once the auth provider finished the authentication flow, and the auth redirect completes,\n  // hide the loader and redirect the user to the profile page\n  redirectLoggedUserToHomePage() {\n    console.log('[LandingPage] redirectLoggedUserToHomePage()');\n    //this.dismissLoading();\n    // As we are calling the Angular router navigation inside a subscribe method, the navigation will be triggered outside Angular zone.\n    // That's why we need to wrap the router navigation call inside an ngZone wrapper\n    this.ngZone.run(() => {      \n      //this.router.navigate(['app/home']);\n      this.router.navigate(['home']);\n    });\n  }\n\n  doDooleAppLogin() : void {\n    let text = this.translate.instant('login.submit');\n    this.loadingController.create({\n      spinner: 'lines',\n      message: text + 'DooleApp',\n      cssClass: 'custom-loading',\n      backdropDismiss:false\n    }).then((loader) => {\n      const currentUrl = this.location.path();\n      this.redirectLoader = loader;\n      this.redirectLoader.present();\n      this.authService.login(this.loginForm.value).subscribe(async (res) => {\n        console.log('[LandingPage] doDooleAppLogin()', await res);\n        this.dismissLoading();\n        //this.checkConditionLegal(res.condicion_legal)\n        this.router.navigate(['/legal']);\n\n      }, async (error) => {\n       console.log('doDooleAppLogin() ERROR', await error);\n       this.dismissLoading();\n       throw error;\n     });\n    });\n   \n  }\n\n  checkConditionLegal(condicion){\n      if(!condicion)\n      this.router.navigate(['/legal']);\n      else this.redirectLoggedUserToHomePage();\n  }\n\n  private async saveInLocalStorage(data: any){\n    /**\n     * On iOS this plugin  Storage will use UserDefaults and on Android SharedPreferences. \n     * Stored data is cleared if the app is uninstalled.\n     */\n    await Storage.set({\n      key: 'mutua',\n      value: data\n    });\n  }\n\n\n  sendPassword(username){\n    console.log('[LandingPage] passwordRecovery()');\n    this.dooleService.postAPIpasswordRecovery(username) .subscribe(\n      async (res: any) =>{\n        //console.log('[InitialPage] passwordRecovery()', await res);\n\n       },(err) => { \n          console.log('[LandingPage] passwordRecovery() ERROR(' + err.code + '): ' + err.message); \n          throw err; \n      });\n  }\n\n  async passwordRecovery() {\n    const alert = await this.alertController.create({\n      cssClass: 'my-alert-class',\n      subHeader: this.translate.instant('landing.header_message_password_recovery'),\n      message: this.translate.instant('landing.message_password_recovery'),\n      inputs: [\n        {\n          name: 'username',\n          type: 'text',\n          placeholder: this.translate.instant('landing.user'),\n        }],\n        buttons: [\n          {\n            text: this.translate.instant(\"alert.button_cancel\"),\n            role: 'cancel',\n            cssClass: 'secondary',\n            handler: (blah) => {\n              console.log('[LandingPage] AlertConfirm Cancel');\n            }\n          }, {\n            text: this.translate.instant(\"alert.button_send\"),\n            handler: (data) => {\n              console.log('[LandingPage] AlertConfirm Okay', data.username );\n              this.sendPassword(data.username)\n            }\n          }\n        ]\n    });\n\n    await alert.present();\n  }\n \n\n \n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LandingPageRoutingModule } from './landing-routing.module';\n\nimport { LandingPage } from './landing.page';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { ComponentsModule } from 'src/app/components/components.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LandingPage\n  }\n];\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReactiveFormsModule,\n    TranslateModule,\n    ComponentsModule,\n    RouterModule.forChild(routes),\n    LandingPageRoutingModule\n  ],\n  declarations: [LandingPage]\n})\nexport class LandingPageModule {}\n"]}