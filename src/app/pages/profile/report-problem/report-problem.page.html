<ion-header>
  <ion-toolbar>
    <ion-button slot="start" fill="clear" (click)="goBacktoProfile()">
      <ion-icon name="close"></ion-icon>
    </ion-button>
    <ion-title>{{'report_problem.title_report_problem' | translate }}</ion-title>
    <ion-button slot="end" fill="clear" (click)="submit()">
      {{'report_problem.button_send' | translate }}
    </ion-button>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-card class="cardProfile" text-wrap>
    <form (ngSubmit)="submit()" [formGroup]="form">
    <ion-list text-wrap>
      <ion-item lines="none">
        <ion-label>{{'report_problem.subtitle_description' | translate }}</ion-label>
      </ion-item>
      <ion-item >
        <ion-textarea (ionInput)="isSubmittedDescription = false" [placeholder]="placeholderDescription()"
        formControlName="description"
      ></ion-textarea> 
      <ion-note *ngIf="this.isSubmittedDescription && this.form.get('description').invalid" class="error ion-padding" color="danger" slot="end">{{ 'error_required' | translate}}</ion-note> 
      <!-- <ion-icon name="chevron-forward-outline" slot="end" size="small"></ion-icon>  -->
      </ion-item>
      <ion-item lines="none" text-wrap>
        <ion-label>{{'report_problem.subtitle_screenshot' | translate }}</ion-label>
        <ion-label slot="end">{{this.numFile}}/6</ion-label>
      </ion-item>
      <ion-item lines="none" >
        <ion-label class="textMediumLeft" text-wrap >{{'report_problem.description_screenshot' | translate }}</ion-label>
      </ion-item>
      <ion-item lines="none" *ngIf="this.patient_files.length > 0">
        <div id="container" style="margin-top: 10px;">
          <div *ngFor="let file of this.patient_files">
            <!-- <ion-card class="cardProfile"> -->
              <div id="left">
                <ion-icon name="open" color="primary" (click)="openFile(file)"></ion-icon>
              </div>
              <div id="middle">
                <p class="titule">{{ file.name }}</p>
              </div>
              <div id="right">
                <ion-icon name="close-circle" color="primary" (click)="removeFile(file.name)"></ion-icon>
              </div> 
          <!-- </ion-card> -->
          </div>       
        </div>
      </ion-item>
      <input
      type="file"
      #fileInput
      (change)="uploadFileFromBrowser($event)"
      hidden="true"
      accept="image/*">

      <ion-button slot="start" 
      fill="clear" 
      (click)="selectImageSource()"
      [disabled]="enableButtonAddFile()">{{'report_problem.button_add_file' | translate }}
      <ion-icon slot="start" name="add-circle" class="primaryIcon"></ion-icon>
    </ion-button>
    </ion-list>
  </form>
  </ion-card>
</ion-content>
