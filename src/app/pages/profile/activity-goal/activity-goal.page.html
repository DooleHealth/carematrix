<ion-header>
  <ion-toolbar mode="ios">
    <ion-buttons slot="start">
      <ion-back-button text=""></ion-back-button>
    </ion-buttons>
    <ion-title class="toolbarTitle">{{header}}</ion-title>
    <ion-buttons slot="end">
      <ion-button fill="clear" routerLink="/profile">
        <ion-icon slot="icon-only" name="menu" color="primary"></ion-icon>
      </ion-button>
    </ion-buttons>

  </ion-toolbar>
</ion-header>

<ion-content class="whiteBackground">

  <ion-segment value="day" [(ngModel)]="segmentFilter" (ionChange)="segmentChanged($event)" scrollable
    style="background-color: white;">
    <ion-segment-button value="1d">
      <ion-label>{{ 'date.day_abbr' | translate}}</ion-label>
    </ion-segment-button>
    <ion-segment-button value="1w">
      <ion-label>{{ 'date.week_abbr' | translate}}</ion-label>
    </ion-segment-button>
    <ion-segment-button value="1m">
      <ion-label>{{ 'date.month_abbr' | translate}}</ion-label>
    </ion-segment-button>
    <ion-segment-button value="1y">
      <ion-label>{{ 'date.year_abbr' | translate}}</ion-label>
    </ion-segment-button>
  </ion-segment>

  <div class="spin" *ngIf="this.isLoading">
   <ion-spinner ></ion-spinner>
  </div>

  <ion-row class="textBlueCentered1, header-change-month" style="background-color: white !important;">
    <!-- Move back one screen of the slides -->
    <ion-col size="2">
      <ion-button fill="clear" (click)="back()" class="textBlueCentered1">
        <ion-icon name="chevron-back-outline" slot="icon-only" color="primary"></ion-icon>
      </ion-button>
    </ion-col>
    <ion-col size="8" class="textBlue; textBlueCentered">
      <h3 style="text-align: center; font-size: 20px;">{{ viewTitle | titlecase }}</h3>
    </ion-col>
    <ion-col size="2" class="textBlueCentered1">
      <ion-button fill="clear" (click)="next()" [disabled]="disabledButton()">
        <ion-icon name="chevron-forward-outline" slot="icon-only" color="primary"></ion-icon>
      </ion-button>
    </ion-col>
  </ion-row>
  <!-- <div class="main-container2">
    <ion-row *ngIf="this.last_value?.value"><ion-col size="6" class="txtTitleGoalsGreenBig">{{this.last_value?.value}}&nbsp;<span style="color:black" class="txtTitleGoalsLittle2">{{units}}</span></ion-col></ion-row>
    <ion-row *ngIf="this.last_value?.date"><ion-col size="4" class="txtTitleGoalsLittle">{{ formatDate(this.last_value?.date) | date: this.dateService.ddMMy()}}</ion-col></ion-row>
   </div> -->

  <!-- <div  id="container" style="min-width: 310px; max-width: 1100px; height: 400px; margin: 0 auto"></div>

  <div *ngIf="goals !== undefined &&  goals.length >0">
    <div *ngIf="!this.isDiastoleAndSystole; else multigoals">
        <div class="main-container">
          <ion-text class="txtTitleNoMargin">{{ 'goals.subtitle_reward' | translate}}</ion-text>
        </div>
        <ion-card  *ngFor="let goal of goals" class="cardProfilePadding">
          <ion-row>
            <ion-col size="2">
              <ion-img src='assets/icons/IconGoal.svg' style="margin-right: 5px; height: 40px;"></ion-img>
            </ion-col>
            <ion-col size="10" class="txtTitleGoals2">{{'goals.description1' | translate}} {{header?.toLowerCase()}} {{goal?.typeString?.toLowerCase()}} {{this.units}} {{'goals.description2' | translate}} {{goal?.coin?.name?.toLowerCase()}}:
              <b>{{goal.score}} {{goal?.coin?.name?.toUpperCase()}}</b><br></ion-col>
          </ion-row>
        </ion-card>
    </div>
    <ng-template #multigoals>
        <div class="main-container">
          <ion-text class="txtTitleNoMargin">{{ 'goals.subtitle_reward' | translate}}</ion-text>
        </div>
        <div *ngFor="let element of this.goals;">
          <ion-card  *ngFor="let goal of element.goals" class="cardProfilePadding">
            <ion-row>
              <ion-col size="2">
                <ion-img src='assets/icons/IconGoal.svg' style="margin-right: 5px; height: 40px;"></ion-img>
              </ion-col>
              <ion-col size="10" class="txtTitleGoals2">{{'goals.description1' | translate}} {{element?.name?.toLowerCase()}} {{goal?.typeString?.toLowerCase()}} {{this.units}} {{'goals.description2' | translate}} {{goal?.coin?.name?.toLowerCase()}}:
                <b>{{goal?.score}} {{goal?.coin?.name?.toUpperCase()}}</b><br></ion-col>
            </ion-row>
          </ion-card>
        </div>
    </ng-template>
  </div> -->

  <!-- Ranges -->
  <!-- <span *ngIf="this.ranges.length > 0">
  <div *ngIf="!this.isDiastoleAndSystole; else multiranges">
    <div class="main-container">
      <ion-text class="txtTitleNoMargin">{{ 'goals.subtitle_information' | translate}}</ion-text>
    </div>
    <ion-card class="cardProfilePadding">
      <ion-card-title  *ngIf="description" class="txtTitleGoals">{{ 'activity_goal.definition' | translate}}</ion-card-title><br>
      <div *ngIf="description" [innerHtml]="this.description"></div>
      <div *ngIf="this.normalValue.length > 0">
        <div *ngFor="let range of this.normalValue">
          <ion-col class="txtTitleSuccess">{{ 'activity_goal.normal_value' | translate}}</ion-col><ion-col>{{range}} {{this.units}}</ion-col>
        </div>
      </div>
      <div *ngIf="this.outRangeValue.length > 0">
        <div *ngFor="let range of this.outRangeValue">
          <ion-col class="txtTitleWarning">{{ 'activity_goal.out_range_value' | translate}}</ion-col><ion-col>{{range}} {{this.units}}</ion-col>
        </div>
      </div>
      <div *ngIf="this.dangerValue.length > 0">
        <div *ngFor="let range of this.dangerValue">
          <ion-col class="txtTitleDanger">{{ 'activity_goal.danger_value' | translate}}</ion-col><ion-col>{{range}} {{this.units}}</ion-col>
        </div>
      </div>
      <br>
    </ion-card>
  </div>

  <ng-template #multiranges>
    <div *ngIf="this.ranges?.length > 0">
      <div class="main-container">
        <ion-text class="txtTitleNoMargin">{{ 'goals.subtitle_information' | translate}}</ion-text>
      </div>
      <div *ngFor="let range of this.ranges;">
        <ion-card class="cardProfilePadding">
          <ion-card-title  *ngIf="range?.name" class="txtTitleGoals"><b>{{ range?.name}}</b></ion-card-title><br>
          <ion-card-title  *ngIf="range?.description" class="txtTitleGoals">{{ 'activity_goal.definition' | translate}}</ion-card-title>
          <div style="padding: 5% 0 5% 0" *ngIf="range?.description" [innerHtml]="range.description"></div>

          <div *ngIf="range?.normalValue?.length > 0">
            <div *ngFor="let value of range.normalValue">
              <ion-col class="txtTitleSuccess">{{ 'activity_goal.normal_value' | translate}}</ion-col><ion-col>{{value}} {{this.units}}</ion-col>
            </div>
          </div>
          <div *ngIf="range?.outRangeValue?.length > 0">
            <div *ngFor="let value of range.outRangeValue">
              <ion-col class="txtTitleWarning">{{ 'activity_goal.out_range_value' | translate}}</ion-col><ion-col>{{value}} {{this.units}}</ion-col>
            </div>
          </div>
          <div *ngIf="range?.dangerValue?.length > 0">
            <div *ngFor="let value of range.dangerValue">
              <ion-col class="txtTitleDanger">{{ 'activity_goal.danger_value' | translate}}</ion-col><ion-col>{{value}} {{this.units}}</ion-col>
            </div>
          </div>
          <br>
        </ion-card>
      </div>
    </div>
  </ng-template>
</span> -->
  <!-- End Ranges -->

  <div class="main-container2" [ngClass]="(this.values &&  this.values.length > 0)? 'contaner-block':'contaner-none' ">
    <ion-row *ngIf="this.last_value?.base_on"><ion-col size="12"
        class="txtTitleGoalsLittle">{{this.last_value?.base_on}} {{getIntervalType(segmentFilter,
        2)}}</ion-col></ion-row>
    <ion-row *ngIf="this.last_value?.value"><ion-col size="12" class="txtTitleGoalsGreenBig">{{
        (this.last_value?.value)? replaceValue(this.last_value?.value):'' }}&nbsp;<span style="color:black"
          class="txtTitleGoalsLittle2">{{units}} / {{getIntervalType(segmentFilter, 1) |
          lowercase}}</span></ion-col></ion-row>
    <!-- <ion-row *ngIf="this.last_value?.date"><ion-col size="4" class="txtTitleGoalsLittle">{{ formatDate(this.last_value?.date) | date: 'dd/MM/y'}}</ion-col></ion-row> -->
  </div>

  <div [ngClass]="(this.values &&  this.values.length > 0)? 'contaner-block':'contaner-none' " id="container"
    style="min-width: 310px; max-width: 1100px; height: 400px; margin: 0 auto"></div>

  <div [ngClass]="(this.values &&  this.values.length > 0)? 'contaner-none':'contaner-block' ">
    <div *ngIf="!this.isLoading" style="margin-bottom: 20%; margin-top: 5%;">
      <ion-row class="ion-align-items-center" style="margin-top: 10px;">
        <ion-col size="2" offset="1">
          <ion-img src='assets/icons/icon_information_secondary.svg' style="height: 40px;"></ion-img>
        </ion-col>
        <ion-col size="8">
          <div>
            <p class="text-center">{{ 'activity_goal.no_data_date' | translate }}</p>
            <p style="font-size: 12px !important;" class="text-center">{{ 'activity_goal.no_data_help' | translate }}
            </p>
          </div>
        </ion-col>
      </ion-row>
    </div>
  </div>

  <div *ngIf="goals !== undefined &&  goals.length >0;">
    <ion-card *ngFor="let goal of goals" class="cardProfilePadding card1">
      <ion-row class="goalGrid">
        <ion-col size="2" style="padding: 0%;">
          <ion-img src='assets/icons/Icon-goal.svg' style="margin-right: 5px; height: 40px;"></ion-img>
        </ion-col>
        <!-- <ion-col size="10" class="txtTitleGoals2">{{'goals.description_reward' | translate}} {{goal.score}} Healthies<br></ion-col> -->
        <ion-col size="10">
          <ion-row style="margin-bottom: 5px;">
            <ion-text class=" txtTitleGreen">{{ 'goals.subtitle_reward' | translate | uppercase}}</ion-text>
          </ion-row>
          <ion-row class="txtTitleGoals2 txtTitleGreen">
            {{'goals.description1' | translate}} {{header?.toLowerCase()}} {{goal?.typeString?.toLowerCase()}}
            {{this.units}} {{'goals.description2' | translate}} {{goal?.coin?.name?.toLowerCase()}}:
            {{goal.score}} {{goal?.coin?.name?.toUpperCase()}}
          </ion-row>
        </ion-col>
      </ion-row>
    </ion-card>
  </div>

<!--   <span *ngIf="this.ranges.length > 0">
    <ion-card class="cardProfilePadding card0">
      <ion-item>
        <ion-text class="txtPoppinsBlueLightBold16px">{{ 'goals.subtitle_information' | translate |
          uppercase}}</ion-text>
      </ion-item>
      <ion-card-title *ngIf="description" class="txtTitleGoals txtMarginElement">{{ 'activity_goal.definition' |
        translate}}</ion-card-title><br>
      <div *ngIf="this.normalValue.length > 0" class="txtMarginElement">
        <ion-text class="titleGoalBlack">{{ 'activity_goal.normal_value' | translate}}</ion-text>
        <div *ngFor="let range of this.normalValue">
          <ion-text style="margin: 10px 0 5px 0;">{{range}} {{this.units}}</ion-text>
        </div>
      </div>
      <div *ngIf="this.outRangeValue.length > 0" class="txtMarginElement">
        <ion-text class="titleGoalBlack">{{ 'activity_goal.out_range_value' | translate}}</ion-text>
        <div *ngFor="let range of this.outRangeValue">
          <ion-text style="margin: 10px 0 5px 0;">{{range}} {{this.units}}</ion-text>
        </div>
      </div>
      <div *ngIf="this.dangerValue.length > 0" class="txtMarginElement">
        <ion-text class="titleGoalBlack">{{ 'activity_goal.danger_value' | translate}}</ion-text>
        <div *ngFor="let range of this.dangerValue">
          <ion-text style="margin: 10px 0 5px 0;">{{range}} {{this.units}}</ion-text>
        </div>
      </div>
      <br>
    </ion-card>
  </span> -->

  <ng-template #noData>
    <div *ngIf="!this.isLoading">
      <app-no-data></app-no-data>
    </div>
  </ng-template>

  <app-button-add *ngIf="this.permissionService.canManageMonitoring" [content]="this.addButton[2]"  (dataUpdated)="this.addElement()"></app-button-add>
</ion-content>

<ion-footer>
    <app-tabs></app-tabs>
</ion-footer>