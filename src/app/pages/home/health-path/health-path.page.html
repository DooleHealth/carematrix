<ion-header>
  <ion-toolbar mode="ios">
    <ion-buttons slot="start">
      <ion-back-button text="" defaultHref="home"></ion-back-button>
    </ion-buttons>
    <ion-title>{{ this.challenge?.name }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="spin" *ngIf="this.fetching;else showLevels">
    <ion-spinner ></ion-spinner>
</div>
<ng-template #showLevels>
  <div class="level-container" *ngIf="this.current_level" routerLink="/home/health-path/detail" routerLinkActive="active-item" [state]="{ challenge: this.challenge}">
    <ion-row>

      <ion-img
        src="{{this.current_level?.cover ? this.current_level.cover : 'assets/icons/IconGoal.svg'}}"
        class="icon-box bigger"></ion-img>
    </ion-row>
    <ion-row class="level-text ion-padding" style="font-size: larger; font-weight: bold;">
      <ion-text> {{ this.current_level?.name}} </ion-text>
    </ion-row>
    <ion-row>
      <ion-progress-bar class="progress-bar" [value]="this.progressBarValue"></ion-progress-bar>
    </ion-row>
    <ion-row class="level-text ion-padding" style="font-size:smaller; width: 80%;padding: 0;">
      <p [innerHtml]="'health_path.goal' | translate:{total:this.current_level?.current_score, coin:this.current_level?.coin_name, required:this.current_level?.score_required - this.current_level?.current_score}"></p>
    </ion-row>
  </div>
  <div class="main-container">
      <div class="wizard-container">
        <ion-grid class="ion-no-padding">
          <ion-row>
            <ion-col sizeLg="4" sizeMd="4" sizeXs="4" *ngFor="let l of levels; let i = index" style="height:40vw">


                <div *ngIf="!l.completed" class="{{ l?.isNextLevelToCompleted ? 'icon-box highlight':'icon-box' }}">
                  <div *ngIf="l?.isNextLevelToCompleted;else showLock" routerLink="/home/health-path/detail" routerLinkActive="active-item" [state]="{ challenge: this.challenge}">
                    <ion-img src="{{l?.cover ? l.cover : 'assets/icons/IconGoal.svg'}}" class="level-icon completed"></ion-img>
                </div>

                <ng-template #showLock>
                  <ion-icon name="lock-closed" (click)="presentAlert()" class="level-icon"></ion-icon>
                </ng-template>
                </div>
                <div *ngIf="l.completed" class="icon-box">
                  <ion-img src="{{l?.cover ? l.cover : 'assets/icons/medal-outline.svg'}}" class="level-icon completed"></ion-img>
                </div>

                 <ion-row>
                  <ion-label [class]="l?.completed ? 'level-text text-completed' : 'level-text'"> {{ l?.name}} </ion-label>
                </ion-row>

            </ion-col>

          </ion-row>
        </ion-grid>

      </div>
  </div>
</ng-template>
</ion-content>