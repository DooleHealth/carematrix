<ion-header mode="ios">
  <ion-toolbar mode="ios">
    <ion-row style="height: 80px; justify-content: center;">
      <ion-col size="7.5" class="alingLeftTop">
        <ion-text class="txtTitleSmall">{{ this.greeting }} </ion-text>
      </ion-col>
      <ion-col size="2.0"
        style="padding-top: 0%; padding-right: 0%; display: flex; align-items: center; padding-left: 3%; margin-top: 3%;"
        class="ion-text-end">
        <ion-tab-button style="margin-top: 1%; padding: 0%;" routerLink="list-notifications" mode="ios">
          <ion-badge class="bell" [ngStyle]="{'font-size': (this.numNotification >99)? '10.5px':'12px'}"
            *ngIf="pusherNotification" mode="ios" color="danger">{{this.numNotification >99? '99+': this.numNotification
            }}</ion-badge>

          <ion-icon class="icon-notifications" style="margin-left: -5px;"
            src="../../assets/icons/notifications.svg"></ion-icon>

        </ion-tab-button>
      </ion-col>

      <ion-col size="2.5"
        style="padding-right: 0; padding-left: 1px; display: flex; align-items: center; padding-left: 3%; margin-top: 3%;">
        <ion-tab-button style="margin-top: 1%; padding: 0%;" routerLink="/profile" mode="ios">
          <ion-icon class="icon-menu" style="margin-left: -5px;" src="../../assets/icons/menu.svg"></ion-icon>
        </ion-tab-button>
      </ion-col>

      <!-- commented thumbnail -->
      <!-- <ion-col size="2.5" style="padding-right: 0; padding-left: 1px; display: flex; align-items: center; padding-left: 3%; margin-top: 3%;">
        <ion-thumbnail class="img-wrapper3" style="margin-right: 10%;" routerLink="/profile"
          [state]="{user:this.userDoole}">
          <app-aspect-ratio [ratio]="{w:0.75, h:0.75}">
            <app-image-shell animation="spinner" [src]="this.userDoole?.temporaryUrl">
            </app-image-shell>
          </app-aspect-ratio>
        </ion-thumbnail>
      </ion-col> -->
    </ion-row>
  </ion-toolbar>
</ion-header>

<ion-content>

  <ion-grid>
    <!-- Health PATH-->
    <ion-row *ngIf="this.challenges?.length > 0" class="paddingTopNoMarginBottom">
      <ion-text class="txtTitle">{{ 'health_path.card_title' | translate}}</ion-text>

      <swiper-container [slidesPerView]="this.challenges?.length == 1 ? 1:1.2" [config]="this.sliderChallengesConfigHorizontal">
        <swiper-slide *ngFor="let challenge of this.challenges" class="ion-no-padding">

          <ion-card mode="md" class="customCardHealthPath">
            <ion-item lines="none" class="cardHeader" routerLink="health-path" routerLinkActive="active-item"
              [state]="{challenge: challenge}">
              <ion-icon name="heart" class="ion-no-margin" slot="start" style="color:var(--purple)"></ion-icon>
              <ion-text class="challenge-txt" slot="start">{{(challenge?.name )? challenge?.name:
                ('home.health_path' |
                translate)}}</ion-text>
            </ion-item>

            <ion-card-content mode="md" class="ion-text-left">
              <ion-grid class="ion-no-padding">
                <ion-row>
                  <ion-col size="3" class="ion-no-padding" style="font-size: medium;">
                  </ion-col>
                  <ion-col size="9" class="ion-no-padding">
                    <p class="text1line"><b>{{challenge?.current_level?.name}}</b></p>
                  </ion-col>
                </ion-row>

                <ion-row>
                  <ion-col size="3" class="ion-no-padding"
                    style="  height: 100%; width: auto;display: block;margin: auto;">
                    <ion-img class="ion-text-center" style="margin: auto;"
                      src="{{this.challenge?.current_level?.cover ? this.challenge.current_level.cover : 'assets/icons/IconGoal.svg'}}"></ion-img>
                  </ion-col>
                  <ion-col size="9">
                    <ion-row style="display: inline-flex !important; margin-bottom: 10%;" class="">
                      {{'health_path.goal_txt1' | translate}}&nbsp;<strong>{{ challenge?.current_level?.current_score
                        }}
                        {{'game.points' | translate}}</strong>
                      <div *ngIf="challenge?.current_level?.percentage_completed < 100">, {{'health_path.goal_txt2' |
                        translate}} {{ challenge?.current_level?.score_required -
                        challenge?.current_level?.current_score }} {{'health_path.goal_txt3' | translate}}</div>
                      <div *ngIf="challenge?.current_level?.percentage_completed < 100">{{'health_path.goal_txt4' |
                        translate}}</div>

                      <br>
                    </ion-row>

                    <ion-row style="margin-bottom: 5%;">
                      <ion-progress-bar class="progress-bar"
                        value="{{ challenge?.current_level?.percentage_completed > 0 ? challenge?.current_level?.percentage_completed / 100 : 0 }}">
                      </ion-progress-bar>
                    </ion-row>

                    <ion-row>
                      <a routerLink="health-path/detail" routerLinkActive="active-item"
                        [state]="{ challenge: challenge}">{{ 'health_path.detail' | translate }}</a>
                    </ion-row>
                  </ion-col>
                </ion-row>
              </ion-grid>
            </ion-card-content>
          </ion-card>

        </swiper-slide>
      </swiper-container>  
    </ion-row>

    <!-- TEMPORARY Prescribed apps TRAK-->
    <ion-row class="paddingTopNoMarginBottom">

      <ion-text class="txtTitle" style="white-space: nowrap">
        {{ 'home.prescribed_apps_title' | translate}}</ion-text>
          <swiper-container [config]="this.config" [slidesPerView]="this.prescribedApps?.length == 1 ? 1:2">
            <swiper-slide *ngFor="let slide of this.prescribedApps" class="ion-no-padding">
             <ng-container *ngIf="slide.iframe_url !== null else openMarketApp">
                <ion-card style="background: white; box-shadow: none;" [href]="this.safeUrl" >
                  <img [src]="slide.icon" />
                </ion-card>
              </ng-container>
    
              <ng-template #openMarketApp (click)="openMarketApp(slide.open_market_app_pkg)">
                <ion-card style="background: white; box-shadow: none;">
                  <img style="width: 30%;" [src]="slide.icon" />
                </ion-card>
              </ng-template>
            </swiper-slide>
          </swiper-container>
    </ion-row>

    <ion-row class="paddingTopNoMarginBottom">

      <ion-text class="txtTitle" style="white-space: nowrap">
        {{ 'home.today_title' | translate}}</ion-text>

      <br>

    </ion-row>

    <!-- Forms -->
    <ion-row>
      <ion-card class="vertical-card">
        <ion-item lines="none" class="noMargin" routerLink="/journal" routerLinkActive="active-item"
          [state]="{segment: 'diets'}">
          <ion-img class="ion-no-margin" slot="start" src="assets/icons/checklist-pen.svg"></ion-img>
          <ion-text class="card-title" slot="start">{{ 'home.forms_subtitle' | translate}}</ion-text>
          <ion-text slot="end" *ngIf="infoForms">{{infoForms?.hour}}</ion-text>

          <ion-icon class="arrow" slot="end" size="small" name="chevron-forward-outline"></ion-icon>
        </ion-item>


        <ion-card-content>
          <div class="txtTitleGoalsLittle3" *ngIf="!this.forms|| this.forms?.length == 0 ">
            {{ 'no_data' | translate}}
          </div>
          <swiper-container #sliderForms *ngIf="this.forms?.length > 0" direction="vertical" pagination="true"
            [config]="this.sliderFormsConfigVertical" (slidechange)="slideFormChange()">

            <swiper-slide style="width: 100% !important;" *ngFor="let slide of this.forms">
              <ion-grid class="zeroMarginPadding" style="width: 100%;">
                  <ion-row>
                    <p style="text-align: left;margin-left: 0px;">- {{slide?.form?.title}}</p>
                  </ion-row>
              </ion-grid>
            </swiper-slide>
            
          </swiper-container>
        </ion-card-content>
      </ion-card>

    </ion-row>


    <!-- Exercises -->
    <ion-row>
      <ion-card class="vertical-card">
        <ion-item lines="none" class="noMargin" routerLink="/journal" routerLinkActive="active-item"
          [state]="{segment: 'diets'}">
          <ion-img class="ion-no-margin" slot="start" src="assets/icons/exercises.svg"></ion-img>
          <ion-text class="card-title" slot="start">{{ 'home.exercises_subtitle' | translate}}</ion-text>
          <ion-text slot="end" *ngIf="infoExercises">{{infoExercises?.hour}}</ion-text>
          <ion-icon class="arrow" slot="end" size="small" name="chevron-forward-outline"></ion-icon>
        </ion-item>

        <ion-card-content>
          <div class="txtTitleGoalsLittle3" *ngIf="!this.exercises|| this.exercises?.length == 0 ">
            {{ 'no_data' | translate}}
          </div>
          <swiper-container #sliderExercises *ngIf="this.exercises?.length > 0" direction="vertical" pagination="true"
            [config]="this.sliderExercisesConfigVertical" (slidechange)="slideExerciseChange()">

            <swiper-slide style="width: 100% !important;" *ngFor="let slide of this.exercises">
              <ion-grid class="zeroMarginPadding" style="width: 100%;">
                  <ion-row>
                    <p style="text-align: left;margin-left: 0px;" >- {{slide?.exercise?.name}}</p>
                  </ion-row>
              </ion-grid>
            </swiper-slide>
          </swiper-container>
        </ion-card-content>
      </ion-card>

    </ion-row>


    <!-- Drugs -->
    <ion-row>
      <ion-card class="vertical-card">
        <ion-item lines="none" class="noMargin" routerLink="/journal" routerLinkActive="active-item"
          [state]="{segment: 'medication'}">
          <ion-img slot="start" class="ion-no-margin" src="assets/icons/medicina.svg"></ion-img>
          <ion-text class="card-title" slot="start">{{ 'home.medication_subtitle' | translate}}</ion-text>
          <ion-text slot="end" *ngIf="infoDrugs">{{infoDrugs?.hour}}</ion-text>
          <ion-icon class="arrow" slot="end" size="small" name="chevron-forward-outline"></ion-icon>
        </ion-item>

        <ion-card-content>
          <div class="txtTitleGoalsLittle3" style="width: 100%;" *ngIf="!this.drugs || this.drugs?.length == 0">
            {{ 'no_data' | translate}}
          </div>
          <swiper-container #sliderDrug (slidechange)="slideDrugChange()" direction="vertical" pagination="true"
            [config]="this.sliderDrugsConfigVertical" class="slider-vertical">
            <swiper-slide *ngFor="let slide of this.drugs">
              <ion-grid>
                <ion-row routerLink="/tracking" [state]="{segment: 'medication'}">
                  <p style="text-align: left">
                    {{(slide.alias !== null)? slide.alias:
                    (slide?.name?.substring(25,-1) + '...') }}
                  </p>
                </ion-row>
                <ion-row>
                  <ion-button class="take-btn" *ngIf="slide.forgotten == 2" size="small" shape="round" 
                    (click)="changeTake(slide.id, slide.state)">{{ 'button.take' | translate }}</ion-button>
                  <ion-button *ngIf="slide.forgotten == 1" size="small" shape="round" color="danger"
                    (click)="changeTake(slide.id, slide.state)">{{ 'button.forgotten' | translate }}<ion-icon
                      style="margin-left: 5px" name="close-outline" color="light"></ion-icon>
                  </ion-button>
                  <ion-button *ngIf="slide.forgotten == 0" size="small" shape="round" color="success"
                    (click)="changeTake(slide.id, slide.state)">{{ 'button.taked' | translate }}<ion-icon
                      style="margin-left: 5px" name="checkmark-outline" color="light"></ion-icon>
                  </ion-button>&nbsp;
                </ion-row>
              </ion-grid>
            </swiper-slide>
          </swiper-container>
        </ion-card-content>
      </ion-card>
    </ion-row>


    <!-- Diets -->
    <ion-row>
      <ion-card class="vertical-card">
        <ion-item lines="none" class="noMargin" routerLink="/journal" routerLinkActive="active-item"
          [state]="{segment: 'diets'}">
          <ion-img class="ion-no-margin" slot="start" src="assets/icons/food.svg"></ion-img>
          <ion-text class="card-title" slot="start">{{ 'home.diet' | translate}}</ion-text>
          <ion-text slot="end" *ngIf="infoDiet">{{infoDiet?.hour}}</ion-text>
          <ion-icon class="arrow" slot="end" size="small" name="chevron-forward-outline"></ion-icon>
        </ion-item>

        <ion-card-content>
          <div class="txtTitleGoalsLittle3" *ngIf="!this.diets|| this.diets?.length == 0 ">
            {{ 'no_data' | translate}}
          </div>
          <swiper-container #sliderDiet *ngIf="this.diets?.length > 0" direction="vertical" pagination="true"
            [config]="this.sliderDietsConfigVertical" (slidechange)="slideDietChange()">

            <swiper-slide style="width: 100% !important;" *ngFor="let slide of this.diets">
              <ion-grid class="zeroMarginPadding" style="width: 100%;">
                  <ion-row>
                    <p style="text-align: left;margin-left: 0px;" (click)="goDetailRecipe(slide)">- {{slide?.name}}</p>
                  </ion-row>
              </ion-grid>
            </swiper-slide>
            
          </swiper-container>
        </ion-card-content>
      </ion-card>
    </ion-row>

    <!-- Games -->
    <ion-row>

      <ion-card class="vertical-card">
        <ion-item lines="none" class="noMargin" routerLink="/journal" routerLinkActive="active-item"
          [state]="{segment: 'games'}">
          <ion-img class="ion-no-margin" slot="start" src="assets/icons/game-controller-1.svg"></ion-img>
          <ion-text class="card-title" slot="start">{{ 'home.plays_subtitle' |
            translate}}</ion-text>
          <ion-text slot="end" *ngIf="infoGames">{{ infoGames?.hour}}</ion-text>
          <ion-icon class="arrow" slot="end" size="small" name="chevron-forward-outline"></ion-icon>
        </ion-item>

        <ion-card-content>

          <div class="txtTitleGoalsLittle3" *ngIf="!this.games|| this.games?.length == 0 ">
            {{ 'no_data' | translate}}
          </div>

          <swiper-container #sliderGames *ngIf="this.games?.length > 0" (slideChange)="slideGamesChange()"
            direction="vertical" pagination="true" [config]="this.sliderGamesConfigVertical" class="slider-vertical">
            <swiper-slide *ngFor="let slide of this.games">
              <div (click)="actionButtonGames(slide.game)" class="txtTitleGoalsLittle3">
                <p style="text-align: left">{{slide.name}}</p>
              </div>
            </swiper-slide>
          </swiper-container>

        </ion-card-content>
      </ion-card>
    </ion-row>



    <!-- Physical Activity -->
    <ion-row>
      <ng-container *ngIf="(!this.activity || this.activity?.length == 0); else elseBlock">
        <ion-card class="vertical-card margin-bottom">
          <ion-item lines="none" class="noMargin" routerLink="/journal" routerLinkActive="active-item"
            [state]="{segment: 'health'}">
            <ion-img slot="start" class="ion-no-margin" src="assets/icons/flame.svg"></ion-img>
            <ion-text class="card-title" slot="start">{{'home.element'| translate}}</ion-text>
            <ion-icon class="arrow" slot="end" size="small" name="chevron-forward-outline"></ion-icon>
          </ion-item>
          <ion-card-content>
            <div class="txtTitleGoalsLittle3">
              {{ 'no_data' | translate}}
            </div>
          </ion-card-content>
        </ion-card>
      </ng-container>

      <ng-template #elseBlock>
        <ion-card class="vertical-card">
          <swiper-container #sliderPhysical *ngIf="this.activity?.length > 0"  pagination="true">
            <swiper-slide *ngFor="let slide of this.activity; let i = index">
              <ion-item lines="none" class="noMargin" routerLink="/journal" routerLinkActive="active-item"
                [state]="{segment: 'health'}">
                <ion-img slot="start" class="ion-no-margin" src="assets/icons/flame.svg"></ion-img>
                <ion-text class="card-title" slot="start">{{( slide?.group)? slide?.group:
                  ('home.element'| translate)}}</ion-text>
                <ion-icon class="arrow" slot="end" size="small" name="chevron-forward-outline"></ion-icon>
              </ion-item>

              <ion-card-content>
                <swiper-container direction="vertical" [config]="this.configVertical">
                  <swiper-slide *ngFor="let element of slide.elements; let j = index">      
                    <div  class="txtTitleGoalsLittle3">
                      {{ element?.name}}
                      {{ element.value }}
                      {{element.units}}
                    </div>  
                  </swiper-slide>
                </swiper-container>
              </ion-card-content>
            </swiper-slide>
          </swiper-container>
        </ion-card>
      </ng-template>
    </ion-row>


    <!-- Reminders -->
<ion-row class="paddingTopNoMarginBottom" *ngIf="this.appointment?.length > 0">
      <ion-text class="txtTitle">{{ 'home.reminders_title' | translate}}</ion-text>
    </ion-row> 
    <!-- Agendas -->
    <ion-row>
      <swiper-container [slidesPerView]="this.appointment?.length == 1 ? 1:1.2">

        <swiper-slide swiperSlide *ngFor="let slide of this.appointment">
          <ion-card class="customCardAppointment">
            <div class="txtTitleGoalsLittle3" *ngIf="!this.appointment || this.appointment?.length == 0 ">
              {{ 'no_data' | translate}}
            </div>

            <ion-card-header class="cardHeader"style="">
              <ion-card-subtitle>{{slide.title | uppercase }}</ion-card-subtitle>
            </ion-card-header>
           
            <ion-card-content mode="md" class="strechCardContent" routerLink="/agenda/reminder/detail"
              routerLinkActive="active-item" [state]="{ event: slide}">
              <ion-grid>
                <ion-row class="alingLeft zeroMarginPadding">
                  <ion-col size="2.5" class="alingLeft zeroMarginPadding">
                    <ion-img src="assets/icons/agenda2.svg"></ion-img>
                  </ion-col>
                  <ion-col size="9.5" class="alingLeft zeroMarginPadding">
                    <p class="text1line" style="padding-left: 5%"><b>{{slide?.staff[0]?.name}}</b></p>
                    <p style="padding-left: 5%" class="ion-margin-start">
                      {{ formatSelectedDate(slide.start_date_iso8601) | titlecase
                      }}
                    </p>
                    <ion-row>
                      <p style="padding-left: 5%"><a>{{ 'home.detail_button' | translate }}</a></p>
                    </ion-row>
                  </ion-col>
                </ion-row>
              </ion-grid>
            </ion-card-content>
          </ion-card>
        </swiper-slide>
      </swiper-container>
    </ion-row>

  </ion-grid>
</ion-content>
<ion-footer>
  <ion-toolbar>
    <app-tabs #tabs></app-tabs>
  </ion-toolbar>
</ion-footer>