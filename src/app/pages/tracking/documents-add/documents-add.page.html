<ion-header>
  <ion-toolbar>
       <ion-buttons slot="start">
      <ion-back-button text="{{'button.cancel' | translate }}"></ion-back-button>
    </ion-buttons>
    <ion-title>{{'documents_add.header' | translate }} </ion-title>
    <ion-button fill="clear" slot="end"  (click)="submit()">
      {{'button.ok' | translate }}
    </ion-button>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form (ngSubmit)="submit()" [formGroup]="form">
  <ion-card class="cardProfile">
    <ion-list>
      <ion-item (click)="openModal()">
        <ion-label>{{ 'documents_add.field_test_type' | translate }}</ion-label>
        <ion-input formControlName="type" slot="end" [placeholder]="(this.isSubmittedType && this.form.get('type').invalid)? '': 'Selecciona uno' " (ionInput)="isSubmittedType = false"></ion-input>
        <ion-note *ngIf="this.isSubmittedType && this.form.get('type').invalid" class="error ion-padding" color="danger" slot="end">{{ 'error_required' | translate}}</ion-note>
        <ion-icon name="chevron-forward-outline" slot="end" size="small"></ion-icon>
      </ion-item>
      <ion-item>
        <ion-label>{{ 'documents_add.field_title' | translate }}</ion-label>
        <ion-input formControlName="title" slot="end" (ionInput)="isSubmittedTitle = false"></ion-input>
        <ion-note *ngIf="this.isSubmittedTitle && this.form.get('title').invalid" class="error ion-padding" color="danger" slot="end"><p>{{ 'error_required' | translate}}</p></ion-note>
        <ion-icon name="chevron-forward-outline" slot="end" size="small"></ion-icon>
      </ion-item>
      <ion-item>
        <ion-label>{{ 'documents_add.field_date' | translate }}</ion-label>
        <ion-datetime formControlName="date" displayFormat="DD/MM/YY" (ionInput)="isSubmittedDate = false" placeholder=" {{  this.currentDate | date: 'dd/MM/YYYY' }} " min="1990-01-01" [max]="this.currentDate"></ion-datetime>
        <ion-note *ngIf="this.isSubmittedDate && this.form.get('date').invalid" class="error ion-padding" color="danger" slot="end"><p>{{ 'error_required' | translate}}</p></ion-note>
        <ion-icon name="chevron-forward-outline" slot="end" size="small"></ion-icon>
      </ion-item>
      <ion-item>
        <ion-label>{{ 'documents_add.field_description' | translate }}</ion-label>
        <ion-textarea slot="end" formControlName="description"></ion-textarea>
        <ion-icon name="chevron-forward-outline" slot="end" size="small"></ion-icon>
      </ion-item>
      <ion-item lines="none">
        <ion-label>{{ 'documents_add.field_private' | translate }}</ion-label>
        <ion-checkbox color="primary" formControlName="private"></ion-checkbox>
        <ion-icon name="chevron-forward-outline" slot="end" size="small"></ion-icon>
      </ion-item>
    </ion-list>
  </ion-card>

  <ion-card class="cardProfile">
    <ion-list>
      <ion-item>
        <ion-label>{{ 'documents_add.field_source' | translate }}</ion-label>
        <ion-select placeholder="Selecciona uno">
          <ion-select-option>procedenciasss</ion-select-option>
        </ion-select>
      </ion-item>
      <ion-item>
        <ion-label>{{ 'documents_add.field_center' | translate }}</ion-label>
        <ion-select placeholder="Selecciona uno">
          <ion-select-option>Centrosss</ion-select-option>
        </ion-select>
      </ion-item>
      <ion-item lines="none">
        <ion-label>{{ 'documents_add.field_profesional' | translate }}</ion-label>
        <ion-select placeholder="Selecciona uno">
          <ion-select-option>MÃ©dicosss</ion-select-option>
        </ion-select>
      </ion-item>
    </ion-list>
  </ion-card>

<ion-card class="cardProfile" text-wrap>
  <form>
    <ion-list text-wrap>
      <ion-item lines="none">
        <ion-label>{{ 'documents_add.attachments' | translate }}</ion-label>
      </ion-item>
      <ion-item lines="none" *ngIf="this.mediaFiles.length > 0">
        <div id="container" style="margin-top: 10px;">
          <div *ngFor="let file of this.mediaFiles">
            <!-- <ion-card class="cardProfile"> -->
              <div id="left">
                <ion-icon name="open" color="primary" (click)="openFile(file)"></ion-icon>
              </div>
              <div id="middle">
                <p class="titule">{{ file.name }}</p>
              </div>
              <div id="right">
                <ion-icon name="close-circle" color="primary" (click)="removeFile(file.name)"></ion-icon>
              </div> 
          <!-- </ion-card> -->
          </div>       
        </div>
      </ion-item>
      <input
      type="file"
      #fileInput
      (change)="uploadFileFromBrowser($event)"
      hidden="true"
      accept="image/*">

      <ion-button slot="start" 
      fill="clear" 
      (click)="selectImageSource()"
      [disabled]="enableButtonAddFile()">{{'report_problem.button_add_file' | translate }}
      <ion-icon slot="start" name="add-circle" class="primaryIcon"></ion-icon>
    </ion-button>

    </ion-list>
  </form>
</ion-card>
</form>

  <section>
    <ion-button expand="block"  (click)="submit()" >{{'documents_add.button_add_result' | translate }}</ion-button>
  </section>  
</ion-content>
