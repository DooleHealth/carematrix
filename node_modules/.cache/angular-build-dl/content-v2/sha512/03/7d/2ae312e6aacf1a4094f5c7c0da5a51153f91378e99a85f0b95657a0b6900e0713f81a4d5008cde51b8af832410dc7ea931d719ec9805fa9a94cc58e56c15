{"version":3,"sources":["webpack:///src/app/pages/home/wellbeing/agenda/agenda-add/agenda-add.module.ts","webpack:///src/app/pages/home/wellbeing/agenda/agenda-add/agenda-add.page.html","webpack:///src/app/pages/home/wellbeing/agenda/agenda-add/agenda-add.page.ts","webpack:///src/app/pages/home/wellbeing/agenda/agenda-add/agenda-add.page.scss","webpack:///src/app/pages/home/wellbeing/agenda/agenda-add/agenda-add-routing.module.ts"],"names":["AgendaAddPageModule","imports","declarations","AgendaAddPage","appointment","socialSharing","calendar","router","fb","datepipe","backgroundImage","edit","history","state","action","form","group","title","required","data","location","indications","agenda_type","staff_id","online","hora","id_cita","metge_nom","centre_nom","centre_cp","centre_adreca","centre_poblacio","centre_telefon","setFormValues","agenda","values","start_date_iso8601","site","description","agenda_type_id","start_time","replace","patchValue","showProcessing","date","get","value","setValue","current","Date","split","data_prestacio","transform","console","log","post","subscribe","navigate","message","route","error","selector","template","providers","routes","path","component","loadChildren","then","m","AgendaPageModule","AgendaAddPageRoutingModule","forChild","exports"],"mappings":"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","file":"agenda-add-agenda-add-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\nimport { ComponentsModule } from 'src/app/components/components.module';\nimport { AgendaAddPageRoutingModule } from './agenda-add-routing.module';\nimport { TranslateModule } from '@ngx-translate/core';\n\nimport { AgendaAddPage } from './agenda-add.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReactiveFormsModule,\n    AgendaAddPageRoutingModule,\n    TranslateModule,\n    ComponentsModule\n  ],\n  declarations: [AgendaAddPage]\n})\nexport class AgendaAddPageModule {}\n","export default \"<custom-header></custom-header>\\n<ion-content class=\\\"back\\\" [ngStyle]=\\\"{'background': 'url(' + backgroundImage + ')'}\\\" fullscreen>\\n  <page-header title=\\\"{{'agenda.header' | translate}}\\\" icon=\\\"assets/icons/i_agenda.svg\\\" >\\n  </page-header>\\n <div class=\\\"main-container\\\">\\n  <ng-container *ngIf=\\\"this.showProcessing else showForm\\\">\\n    <div style=\\\"margin: 20px 40px; text-align: center\\\">\\n      <ion-spinner></ion-spinner>\\n      <p>\\n        <b>{{ 'appointments.save' | translate }}</b>\\n      </p>\\n    </div>\\n  </ng-container>\\n\\n  <ng-template #showForm>\\n\\n  <ion-text>  {{ 'agenda.added2' | translate }}</ion-text>\\n  <form (ngSubmit)=\\\"submit()\\\" [formGroup]=\\\"form\\\">\\n\\n<ion-row>\\n  <ion-col>\\n    <ion-item lines=\\\"none\\\">\\n      <ion-input placeholder=\\\"{{'agenda.placeholder1' | translate}}\\\" formControlName=\\\"title\\\"></ion-input>\\n    </ion-item>\\n  </ion-col>\\n</ion-row>\\n\\n<ion-row>\\n  <ion-col>\\n    <ion-item lines=\\\"none\\\">\\n      <ion-datetime placeholder=\\\"{{'agenda.placeholder2' | translate}}\\\" formControlName=\\\"data\\\" displayFormat=\\\"DD/MM/YYYY\\\"></ion-datetime>\\n      <ion-icon slot=\\\"end\\\" name=\\\"calendar\\\"></ion-icon>\\n    </ion-item>\\n  </ion-col>\\n</ion-row>\\n<ion-row>\\n  <ion-col>\\n    <ion-item lines=\\\"none\\\">\\n      <ion-input placeholder=\\\"{{'agenda.placeholder3' | translate}}\\\" formControlName=\\\"location\\\">\\n      </ion-input>\\n      <ion-icon name=\\\"pin\\\"></ion-icon>\\n    </ion-item>\\n  </ion-col>\\n</ion-row>\\n<ion-row>\\n  <ion-col>\\n    <ion-item lines=\\\"none\\\">\\n      <ion-textarea placeholder=\\\"{{'agenda.placeholder4' | translate}}\\\" formControlName=\\\"indications\\\"></ion-textarea>\\n    </ion-item>\\n  </ion-col>\\n</ion-row>\\n<ion-row><ion-col col-8></ion-col>\\n  <ion-col col-2>\\n    <ion-button class=\\\"button_cred\\\" color=\\\"primary\\\" routerLink=\\\"agenda\\\"  >\\n      {{ 'commons.cancel' | translate }}\\n    </ion-button>\\n  </ion-col>\\n  <ion-col col-2>\\n\\n    <ion-button class=\\\"button_cred\\\" color=\\\"primary\\\" type=\\\"submit\\\" color=\\\"primary\\\" [disabled]=\\\"!form.valid\\\" >\\n      {{ 'commons.save' | translate | uppercase}}\\n\\n\\n    </ion-button>\\n  </ion-col>\\n</ion-row>\\n  </form>\\n  </ng-template>\\n</div> \\n\\n</ion-content>\\n\";","import { Component, OnInit } from '@angular/core';\nimport {HttpErrorResponse} from \"@angular/common/http\";\nimport { SocialSharing } from '@ionic-native/social-sharing/ngx';\nimport { Calendar } from '@ionic-native/calendar/ngx';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { AppointmentService } from 'src/app/services/appointment.service';\nimport { Router } from '@angular/router';\nimport { DatePipe } from '@angular/common';\nimport { IAgenda } from 'src/app/shared/classes/appointments';\nimport { getRandomBackground } from 'src/app/shared/classes/utils';\n\n@Component({\n  selector: 'app-agenda-add',\n  templateUrl: './agenda-add.page.html',\n  styleUrls: ['./agenda-add.page.scss'],\n  providers: [DatePipe]\n})\nexport class AgendaAddPage implements OnInit {\n  \n  backgroundImage: string = getRandomBackground();\n  form: FormGroup;\n  public edit:boolean = history.state.action;\n  public agenda: IAgenda;\n  public showProcessing: boolean;\n  constructor(private appointment: AppointmentService,\n    private socialSharing: SocialSharing,\n    private calendar: Calendar,\n    private router: Router,\n    private fb: FormBuilder,\n    public datepipe: DatePipe, ) {\n\n}\n\n  ngOnInit() {\n    \n    this.form = this.fb.group({\n      title: ['',  Validators.required],\n      data: ['',  Validators.required],\n      location: [''],\n      indications: [''],\n      agenda_type: ['8'],\n      staff_id: [''],\n      online: [false],\n      hora: ['1200'],\n      id_cita: [''],\n      metge_nom: [''],\n      centre_nom: [''],\n      centre_cp: [''],\n      centre_adreca: [''],\n      centre_poblacio: [''],\n      centre_telefon: [''],\n     \n    });\n\n    if(this.edit) \n      this.setFormValues();\n      \n    \n  }\n\n  setFormValues(){\n    let agenda : IAgenda = history.state.agenda;\n      let values = {\n        title: agenda.title,\n        data: agenda.start_date_iso8601,\n        location: agenda.site,\n        indications: agenda.description,\n        agenda_type: agenda.agenda_type_id,\n        hora: agenda.start_time.replace(\":\",\"\")\n      }\n\n      this.form.patchValue(values);\n  }\n\n  async submit(){\n    \n    this.showProcessing = true;\n    let date = this.form.get('data').value;\n    let title = this.form.get('title').value;\n    let location = this.form.get('location').value;\n    this.form.get('metge_nom').setValue(title);\n    this.form.get('centre_nom').setValue(location);\n    if(date){\n      var current = new Date(date.split('T')[0]);\n      let data_prestacio = this.datepipe.transform(current, 'yyyyMMdd');\n      this.form.get('data').setValue(data_prestacio);\n    }\n    console.log(\"data: \", {data:this.form.value});\n    \n    //const endpoint = this.edit ? 'mgc/agenda':  'mgc/agenda/'+ this.agenda.id;\n    if(!this.edit){\n      this.appointment.post('mgc/agenda', {data:this.form.value}).subscribe(\n        async (data) => {\n          console.log(\"data: \", data);\n          this.router.navigate(['/app/home/wellbeing/agenda/success'], {state: {message:'agenda.add', route:'/app/home/wellbeing/agenda'}});\n          //this.router.navigate(['/app/home/healthcare/appointments/success'], { state: { isOnline: false, appointmentType: 8, isAppointmentChange: false, agenda: data } });\n        },\n        async (error) => {\n          // Called when error\n          console.log('error: ', error);\n          throw new HttpErrorResponse(error);\n        },\n        () => {\n          // Called when operation is complete (both success and error)\n          // this.showProcessing = false;\n        });\n    }else{\n      this.router.navigate(['/app/home/wellbeing/agenda/success'], {state: {message:'agenda.add', route:'/app/home/wellbeing/agenda'}});\n      //this.router.navigate(['/app/home/healthcare/appointments/success'], { state: { isOnline: false, appointmentType: 8, isAppointmentChange: false, agenda: this.agenda } });\n    }\n  }\n}","export default \"ion-content {\\n  --background: none;\\n  background-position: center top;\\n  background-repeat: no-repeat !important;\\n  background-size: cover !important;\\n}\\n\\nion-icon {\\n  color: #006172;\\n}\\n\\n.logo-header {\\n  width: 170px;\\n  height: auto;\\n  display: block;\\n  margin-left: auto;\\n  margin-right: auto;\\n}\\n\\n.header-one {\\n  --background: rgba(255, 255, 255, 0.9);\\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL2FnZW5kYS1hZGQucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksa0JBQUE7RUFDQSwrQkFBQTtFQUNBLHVDQUFBO0VBQ0EsaUNBQUE7QUFDSjs7QUFDQTtFQUNJLGNBQUE7QUFFSjs7QUFDQTtFQUNFLFlBQUE7RUFFQSxZQUFBO0VBQ0EsY0FBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7QUFDRjs7QUFDQTtFQUNFLHNDQUFBO0VBQ0EsNEVBQUE7QUFFRiIsImZpbGUiOiJhZ2VuZGEtYWRkLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1jb250ZW50IHtcbiAgICAtLWJhY2tncm91bmQ6IG5vbmU7XG4gICAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyIHRvcDtcbiAgICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0ICFpbXBvcnRhbnQ7XG4gICAgYmFja2dyb3VuZC1zaXplOiBjb3ZlciAhaW1wb3J0YW50O1xuICB9XG5pb24taWNvbntcbiAgICBjb2xvcjogIzAwNjE3MjsgXG59XG5cbi5sb2dvLWhlYWRlciB7XG4gIHdpZHRoOiAxNzBweDtcblxuICBoZWlnaHQ6IGF1dG87XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBtYXJnaW4tbGVmdDogYXV0bztcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xufVxuLmhlYWRlci1vbmUge1xuICAtLWJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC45KTtcbiAgYm94LXNoYWRvdzogMCA0cHggOHB4IDAgcmdiYSgwLCAwLCAwLCAwLjIpLCAwIDZweCAyMHB4IDAgcmdiYSgwLCAwLCAwLCAwLjE5KTtcbn1cbiJdfQ== */\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { AgendaAddPage } from './agenda-add.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AgendaAddPage\n  },\n  {\n    path: 'agenda',\n    loadChildren: () => import('../../agenda/agenda.module').then( m => m.AgendaPageModule)\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AgendaAddPageRoutingModule {}\n"]}