{"version":3,"sources":["webpack:///src/app/pages/landing/credential/credential.page.ts","webpack:///src/app/pages/landing/credential/credential.page.html","webpack:///src/app/pages/landing/credential/credential.module.ts","webpack:///src/app/pages/landing/credential/credential.page.scss","webpack:///src/app/pages/landing/credential/credential-routing.module.ts"],"names":["CredentialPage","fb","authService","router","loadingController","translate","alertController","backgroundImage","credentials","group","mutua","required","console","log","action","resource","route","header","create","loading","present","validateCredentials","value","subscribe","data","dismiss","get","tiene_email","id_usuari_mgc","email","navigate","error","showAlert","instant","message","buttons","then","res","selector","template","CredentialPageModule","imports","declarations","routes","path","component","loadChildren","m","EmailPageModule","CredentialPageRoutingModule","forChild","exports"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UAaaA,cAAc;AAMzB,gCACUC,EADV,EAEUC,WAFV,EAGUC,MAHV,EAIUC,iBAJV,EAKSC,SALT,EAMSC,eANT,EAM2C;AAAA;;AALjC,eAAAL,EAAA,GAAAA,EAAA;AACA,eAAAC,WAAA,GAAAA,WAAA;AACA,eAAAC,MAAA,GAAAA,MAAA;AACA,eAAAC,iBAAA,GAAAA,iBAAA;AACD,eAAAC,SAAA,GAAAA,SAAA;AACA,eAAAC,eAAA,GAAAA,eAAA;AAXT,eAAAC,eAAA,GAA0B,0FAA1B;AAW8C;;AAZrB;AAAA;AAAA,iBAczB,oBAAW;AACT,iBAAKC,WAAL,GAAmB,KAAKP,EAAL,CAAQQ,KAAR,CAAc;AAC/BC,mBAAK,EAAE,CAAC,EAAD,EAAK,CAAC,0DAAWC,QAAZ,CAAL;AADwB,aAAd,CAAnB;AAKAC,mBAAO,CAACC,GAAR,CAAY,0BAAZ,EAAwC,KAAKX,WAAL,CAAiBY,MAAzD,EANS,CAOT;;AACA,oBAAO,KAAKZ,WAAL,CAAiBY,MAAxB;AACE,mBAAK,YAAL;AACE,qBAAKC,QAAL,GAAgB,UAAhB;AACA,qBAAKC,KAAL,GAAa,UAAb;AACA,qBAAKC,MAAL,GAAc,kBAAd;AACA;;AACF,mBAAK,kBAAL;AACE,qBAAKF,QAAL,GAAgB,aAAhB;AACA,qBAAKC,KAAL,GAAa,OAAb;AACA,qBAAKC,MAAL,GAAc,kBAAd;AACA;;AACF,mBAAK,eAAL;AACE,qBAAKF,QAAL,GAAgB,YAAhB;AACA,qBAAKC,KAAL,GAAa,OAAb;AACA,qBAAKC,MAAL,GAAc,gBAAd;AACA;;AACF;AACEL,uBAAO,CAACC,GAAR,CAAY,QAAZ,EAAqB,KAAKX,WAAL,CAAiBY,MAAtC;AAjBJ;AAsBD;AA5CwB;AAAA;AAAA,iBA8CnB,8BAAqB;;;;;;;;;;AAET,6BAAM,KAAKV,iBAAL,CAAuBc,MAAvB,EAAN;;;AAAVC,6B;;AACN,6BAAMA,OAAO,CAACC,OAAR,EAAN;;;AAEA,2BAAKlB,WAAL,CAAiBmB,mBAAjB,CAAqC,KAAKb,WAAL,CAAiBc,KAAtD,EAA6D,KAAKP,QAAlE,EAA4EQ,SAA5E,CACE,UAAOC,IAAP;AAAA,+BAAgB;AAAA;AAAA;AAAA;AAAA;AAAA;AACd,yCAAML,OAAO,CAACM,OAAR,EAAN;;AADc;AAEdb,yCAAO,CAACC,GAAR,CAAY,QAAZ,EAAsB,KAAKL,WAAL,CAAiBkB,GAAjB,CAAqB,OAArB,EAA8BJ,KAApD;AACA,uCAAKpB,WAAL,CAAiBQ,KAAjB,GAAyB,KAAKF,WAAL,CAAiBkB,GAAjB,CAAqB,OAArB,EAA8BJ,KAAvD;AACA,uCAAKpB,WAAL,CAAiByB,WAAjB,GAAgCH,IAAI,CAACG,WAArC;AACA,uCAAKzB,WAAL,CAAiB0B,aAAjB,GAAkCJ,IAAI,CAACI,aAAvC;AACA,uCAAK1B,WAAL,CAAiB2B,KAAjB,GAA0BL,IAAI,CAACK,KAA/B;AAEA,uCAAK1B,MAAL,CAAY2B,QAAZ,CAAqB,CAAC,KAAKd,KAAN,CAArB;;AARc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAhB;AAAA,uBADF,EAYE,UAACe,KAAD,EAAW;AACT;AACAZ,+BAAO,CAACM,OAAR;;AAEA,6BAAI,CAACO,SAAL,CAAe,KAAI,CAAC3B,SAAL,CAAe4B,OAAf,CAAuB,YAAvB,CAAf,EAJS,CAKT;AACA;;AAED,uBApBH,EAqBG,YAAM;AACL;AACAd,+BAAO,CAACM,OAAR;AACD,uBAxBH;;;;;;;;;AA0BD;AA7EwB;AAAA;AAAA,iBAgFzB,mBAAUS,OAAV,EAA0B;AAExB,iBAAK5B,eAAL,CAAqBY,MAArB,CAA4B;AAC1BD,oBAAM,EAAE,OADkB;AAE1BiB,qBAAO,EAAEA,OAFiB;AAG1BC,qBAAO,EAAE,CAAC,IAAD;AAHiB,aAA5B,EAIGC,IAJH,CAIQ,UAAAC,GAAG,EAAI;AAEbA,iBAAG,CAACjB,OAAJ;AAED,aARD;AAUD;AA5FwB;;AAAA;AAAA,S;;;;gBAZlB;;gBACA;;gBAEA;;gBADiB;;gBAEjB;;gBAFA;;;;AAUIpB,oBAAc,6DAL1B,gEAAU;AACTsC,gBAAQ,EAAE,gBADD;AAETC,gBAAQ,EAAR,wEAFS;;AAAA,OAAV,CAK0B,GAAdvC,cAAc,CAAd;;;;;;;;;;;;;;;;ACbb;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCoBFwC,oBAAoB;AAAA;AAAA,O;;AAApBA,0BAAoB,6DAZhC,+DAAS;AACRC,eAAO,EAAE,CACP,4DADO,EAEP,0DAFO,EAGP,0DAHO,EAIP,sFAJO,EAKP,kEALO,EAMP,mEANO,CADD;AAURC,oBAAY,EAAE,CAAC,+DAAD;AAVN,OAAT,CAYgC,GAApBF,oBAAoB,CAApB;;;;;;;;;;;;;;;;ACpBb;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACIf,UAAMG,MAAM,GAAW,CACrB;AACEC,YAAI,EAAE,EADR;AAEEC,iBAAS,EAAE;AAFb,OADqB,EAKrB;AACED,YAAI,EAAE,OADR;AAEEE,oBAAY,EAAE;AAAA,iBAAM;AAAA;AAAA;AAAA;AAAA,mBAAgCV,IAAhC,CAAsC,UAAAW,CAAC;AAAA,mBAAIA,CAAC,CAACC,eAAN;AAAA,WAAvC,CAAN;AAAA;AAFhB,OALqB,CAAvB;;UAgBaC,2BAA2B;AAAA;AAAA,O;;AAA3BA,iCAA2B,6DALvC,+DAAS;AACRR,eAAO,EAAE,CAAC,6DAAaS,QAAb,CAAsBP,MAAtB,CAAD,CADD;AAERQ,eAAO,EAAE,CAAC,4DAAD;AAFD,OAAT,CAKuC,GAA3BF,2BAA2B,CAA3B","file":"pages-landing-credential-credential-module-es5.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { AuthenticationService } from '../../../services/authentication.service';\nimport { AlertController, LoadingController } from '@ionic/angular';\nimport { Router } from '@angular/router';\nimport { TranslateService } from '@ngx-translate/core';\nimport { getRandomBackground } from 'src/app/shared/classes/utils';\n\n@Component({\n  selector: 'app-credential',\n  templateUrl: './credential.page.html',\n  styleUrls: ['./credential.page.scss'],\n})\nexport class CredentialPage implements OnInit {\n  backgroundImage: string = getRandomBackground();\n  credentials: FormGroup;\n  header : string;\n  resource:string;\n  route:string;\n  constructor( \n    private fb: FormBuilder,\n    private authService: AuthenticationService,\n    private router: Router,\n    private loadingController: LoadingController,\n    public translate: TranslateService,\n    public alertController: AlertController) { }\n\n  ngOnInit() {    \n    this.credentials = this.fb.group({\n      mutua: ['', [Validators.required]] \n    });\n   \n\n    console.log(\"this.authService.action:\", this.authService.action);\n    // Based on user action, get API resource\n    switch(this.authService.action){\n      case 'signUpUser':\n        this.resource = 'registre';\n        this.route = 'identity';\n        this.header = 'landing.registre';\n        break;\n      case 'passwordRecovery':\n        this.resource = 'contrasenya';\n        this.route = 'email';\n        this.header = 'landing.password';\n        break;\n      case 'addSocialAuth':\n        this.resource = 'credencial';\n        this.route = 'email';\n        this.header = 'landing.social';\n        break;\n      default:\n        console.log(\"this: \",this.authService.action);\n      \n    }\n    \n    \n  }\n\n  async validateCredential() {\n\n    const loading = await this.loadingController.create();\n    await loading.present();\n    \n    this.authService.validateCredentials(this.credentials.value, this.resource).subscribe(\n      async (data) => {\n        await loading.dismiss();\n        console.log('data: ', this.credentials.get('mutua').value);\n        this.authService.mutua = this.credentials.get('mutua').value;\n        this.authService.tiene_email  = data.tiene_email;\n        this.authService.id_usuari_mgc  = data.id_usuari_mgc;\n        this.authService.email  = data.email;\n       \n        this.router.navigate([this.route]);\n        \n      },\n      (error) => {\n        // Called when error\n        loading.dismiss();\n        \n        this.showAlert(this.translate.instant('login.fail'));\n        //console.log(\"error credencial:\", error);\n        //throw error;\n        \n      },\n       () => {\n        // Called when operation is complete (both success and error)\n        loading.dismiss();\n      });\n      \n  }\n\n  \n  showAlert(message:string) {\n\n    this.alertController.create({\n      header: 'Error',\n      message: message,\n      buttons: ['OK']\n    }).then(res => {\n\n      res.present();\n\n    });\n\n  }\n\n\n}\n","export default \"<ion-header>\\n  <ion-toolbar class=\\\"header-one\\\">\\n  \\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-icon class=\\\"icon_person\\\" src=\\\"assets/icons/usuari.svg\\\"></ion-icon>\\n      <!-- <img class=\\\"icon_new\\\" src=\\\"assets/icons/usuari.svg\\\"/> -->\\n      \\n    </ion-buttons>\\n    <ion-buttons slot=\\\"primary\\\"style=\\\"margin-right: 5%;\\\">\\n      <ion-back-button text=\\\"\\\" defaultHref=\\\"/landing\\\" ></ion-back-button> \\n    </ion-buttons>\\n    \\n    <ion-title>{{ this.header | translate }}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content [ngStyle]=\\\"{'background': 'url(' + this.backgroundImage + ')'}\\\" fullscreen>\\n  <div class=\\\"landing-container\\\">\\n    <form (ngSubmit)=\\\"validateCredential()\\\" [formGroup]=\\\"credentials\\\" class=\\\"formulario\\\">\\n      <div class=\\\"input-group formulario\\\" >\\n        <ion-text>\\n          <p>{{ 'landing.text' | translate }} </p>\\n        </ion-text>\\n        <ion-text>\\n          <p>{{ 'landing.text_2' | translate }} </p>\\n        </ion-text>\\n        <ion-row>\\n          <ion-col col-10>\\n            <ion-img style=\\\"width: 310px; height: auto;margin-bottom: 5%;padding-left: 5%;\\\" src=\\\"assets/images/targeta_mgc.png\\\"></ion-img>\\n          </ion-col>\\n          <ion-col col></ion-col>\\n        </ion-row>\\n  \\n        <ion-item-divider><br><br><br>\\n          <ion-input formControlName=\\\"mutua\\\" placeholder=\\\"{{ 'landing.placeholder' | translate }}\\\" ></ion-input>\\n        </ion-item-divider>\\n     \\n        <ion-button type=\\\"submit\\\" expand=\\\"block\\\" color=\\\"primary\\\" [disabled]=\\\"!credentials.valid\\\">{{ 'landing.button' | translate |Â uppercase}}</ion-button>\\n        \\n    </div>\\n    </form>\\n  </div>\\n \\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { CredentialPageRoutingModule } from './credential-routing.module';\nimport { CredentialPage } from './credential.page';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    IonicModule,\n    FormsModule,\n    CredentialPageRoutingModule,\n    ReactiveFormsModule,\n    TranslateModule\n  ],\n  \n  declarations: [CredentialPage]\n})\nexport class CredentialPageModule {}\n","export default \"ion-item-divider {\\n  background-color: #ffffff;\\n  margin-bottom: 20px;\\n  color: #006172;\\n  max-height: 47px;\\n}\\n\\nion-content::part(background) {\\n  background: url(/assets/images/backgrounds/fons_aleatori_1.svg) no-repeat center center/cover;\\n}\\n\\n.formulario {\\n  background-color: transparent;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL2NyZWRlbnRpYWwucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0kseUJBQUE7RUFDSSxtQkFBQTtFQUNBLGNBQUE7RUFDQSxnQkFBQTtBQUNSOztBQUVJO0VBQ0ksNkZBQUE7QUFDUjs7QUFFQTtFQUNJLDZCQUFBO0FBQ0oiLCJmaWxlIjoiY3JlZGVudGlhbC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24taXRlbS1kaXZpZGVye1xuICAgIGJhY2tncm91bmQtY29sb3I6I2ZmZmZmZjsgXG4gICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICAgIGNvbG9yOiMwMDYxNzI7IFxuICAgICAgICBtYXgtaGVpZ2h0OiA0N3B4O1xufVxuaW9uLWNvbnRlbnQge1xuICAgICY6OnBhcnQoYmFja2dyb3VuZCkge1xuICAgICAgICBiYWNrZ3JvdW5kOiB1cmwoL2Fzc2V0cy9pbWFnZXMvYmFja2dyb3VuZHMvZm9uc19hbGVhdG9yaV8xLnN2Zykgbm8tcmVwZWF0IGNlbnRlciBjZW50ZXIgLyBjb3ZlcjtcbiAgICAgIH1cbiAgfVxuLmZvcm11bGFyaW97XG4gICAgYmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudDtcbn0iXX0= */\";","import { CUSTOM_ELEMENTS_SCHEMA, NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { CredentialPage } from './credential.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CredentialPage\n  },\n  {\n    path: 'email',\n    loadChildren: () => import('../email/email.module').then( m => m.EmailPageModule)\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n  \n})\nexport class CredentialPageRoutingModule {}\n"]}