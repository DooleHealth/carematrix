{"version":3,"sources":["./src/app/pages/user/settings/settings.page.html","./src/app/pages/user/settings/settings.page.ts","./src/app/pages/user/settings/settings-routing.module.ts","./src/app/pages/user/settings/settings.module.ts","./src/app/pages/user/settings/settings.page.scss"],"names":[],"mappings":"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","file":"user-settings-settings-module-es2015.js","sourcesContent":["export default \"<!--\\n  Generated template for the LockscreenPage page.\\n\\n  See http://ionicframework.com/docs/components/#navigation for more info on\\n  Ionic pages and navigation.\\n-->\\n<custom-header></custom-header>\\n<ion-content class=\\\"back\\\" [ngStyle]=\\\"{'background': 'url(' + backgroundImage + ')'}\\\" fullscreen>\\n  <page-header title=\\\"{{'side-menu.settings' | translate}}\\\" [icon]=\\\"'assets/icons/i_configuracio.svg'\\\">\\n  </page-header>\\n  <div class=\\\"main-container\\\">\\n    <ion-item>\\n      <ion-label>{{'biometrics.auth' | translate}}</ion-label>\\n      <ion-toggle slot=\\\"start\\\" name=\\\"blueberry\\\" [(ngModel)]=\\\"this.hasBiometricAuth\\\" [disabled]=\\\"this.isBioAuthAvailable\\\" [checked]=\\\"this.hasBiometricAuth != 'false' ? true : false\\\" (ngModelChange)=\\\"setBioAuth(ioToggle.checked)\\\" #ioToggle></ion-toggle>\\n    </ion-item>\\n  </div>\\n\\n</ion-content>\\n\";","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Plugins } from '@capacitor/core';\nimport { FingerprintAIO } from '@ionic-native/fingerprint-aio/ngx';\nimport { TranslateService } from '@ngx-translate/core';\nimport { AuthenticationService } from 'src/app/services/authentication.service';\nimport { NotificationService } from 'src/app/services/notification.service';\nimport { getRandomBackground } from 'src/app/shared/classes/utils';\nimport {Md5} from 'ts-md5/dist/md5';\nconst { Storage } = Plugins;\n\n@Component({\n  selector: 'app-settings',\n  templateUrl: './settings.page.html',\n  styleUrls: ['./settings.page.scss'],\n})\nexport class SettingsPage implements OnInit {\n  hasBiometricAuth : any;\n  backgroundImage: string = getRandomBackground();\n  isBioAuthAvailable:string;\n  constructor(public translate: TranslateService, private authService: AuthenticationService, private faio : FingerprintAIO, private notification: NotificationService) { }\n\n  async ngOnInit() {\n   \n  }\n\n  async ionViewDidEnter(){\n    this.faio.isAvailable().then(async (res)=>{\n      \n      let setting = await Storage.get({ key: 'settings-bio' } );\n      this.hasBiometricAuth = setting.value != undefined && setting.value != 'false';\n      console.log('res: ', res);\n\n    }).catch(()=>{\n      this.isBioAuthAvailable = 'disabled';\n      console.log('Bio Auth: ', this.isBioAuthAvailable);\n    \n    })\n   \n  }\n  async setBioAuth(enabled){\n    console.log('settings-bio', String(enabled));\n\n    if(enabled){\n      this.showFingerprintAuthDlg();\n    }else{\n      this.hasBiometricAuth = false;\n      await Storage.set({\n        key: 'settings-bio',\n        value: 'false'\n      });\n      this.notification.showSuccess(this.translate.instant('ElementsPage.textcorrect'));\n    }\n  \n  }\n\n  async registerBiometrics(){\n\n    let e = Md5.hashStr(Date.now().toString()).toString();\n\n    let credentials = {\n      mutua: this.authService.mutua,\n      credencial:\"biometric\",\n      username: e\n    }\n\n    this.authService.validateCredentials(credentials, 'credencial2').subscribe(\n      async (data) => {\n      \n        console.log(data);\n        await Storage.set({\n          key: 'bio-auth',\n          value: e\n        });\n       \n        await Storage.set({\n          key: 'settings-bio',\n          value: 'true'\n        });\n\n        this.notification.showSuccess(this.translate.instant('ElementsPage.textcorrect'));\n      },\n      (error) => {\n        // Called when error\n        throw error;\n      });   \n  }\n\n  public showFingerprintAuthDlg() {\n\n    this.faio.isAvailable().then((result: any) => {\n      console.log(result)\n\n      this.faio.show({\n        cancelButtonTitle: this.translate.instant('face-id.cancel'),\n        title: this.translate.instant('face-id.title'),\n        fallbackButtonTitle: this.translate.instant('face-id.fallback')\n      })\n        .then(async (result: any) => {\n        \n          this.registerBiometrics();\n         \n        })\n        .catch((error: any) => {\n          this.hasBiometricAuth  = false;\n          console.log(error);\n          if(error.code == -102){\n            setTimeout(()=>this.showFingerprintAuthDlg(), 500);\n          }\n        });\n    })\n    .catch((error: any) => {\n      console.log(error)\n    });\n  }\n}\n\n  ","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SettingsPage } from './settings.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SettingsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SettingsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { SettingsPageRoutingModule } from './settings-routing.module';\nimport { SettingsPage } from './settings.page';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { ComponentsModule } from 'src/app/components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SettingsPageRoutingModule,\n    TranslateModule,\n    ComponentsModule,\n  ],\n  declarations: [SettingsPage]\n})\nexport class SettingsPageModule {}\n","export default \".logo-header {\\n  width: 170px;\\n  height: auto;\\n  display: block;\\n  margin-left: auto;\\n  margin-right: auto;\\n}\\n\\n.header-one {\\n  --background: rgba(255, 255, 255, 0.9);\\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\\n}\\n\\n.lock-img {\\n  height: auto !important;\\n  width: auto !important;\\n  align-items: center;\\n}\\n\\nion-icon {\\n  font-size: 90px;\\n  color: #006172;\\n  text-align: center;\\n  position: relative;\\n  top: calc(50% - 10px);\\n  /* 50% - 3/4 of icon height */\\n}\\n\\n#container * {\\n  margin: 0;\\n  padding: 0;\\n}\\n\\n#container {\\n  width: 100%;\\n  font-size: 0;\\n}\\n\\n#left,\\n#middle,\\n#right {\\n  display: inline-block;\\n  *display: inline;\\n  zoom: 1;\\n  vertical-align: top;\\n}\\n\\n#left {\\n  width: 25%;\\n}\\n\\n#middle {\\n  vertical-align: bottom;\\n  width: 60%;\\n}\\n\\n#right {\\n  vertical-align: bottom;\\n  width: 15%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NldHRpbmdzLnBhZ2Uuc2NzcyIsInNldHRpbmdzLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLFlBQUE7RUFFQSxZQUFBO0VBQ0EsY0FBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7QUFBSjs7QUFFRTtFQUNFLHNDQUFBO0VBQ0EsNEVBQUE7QUFDSjs7QUFFRTtFQUNFLHVCQUFBO0VBQ0Esc0JBQUE7RUFDQSxtQkFBQTtBQUNKOztBQUNFO0VBRUksZUFBQTtFQUNBLGNBQUE7RUFDQSxrQkFBQTtFQUNBLGtCQUFBO0VBQ0EscUJBQUE7RUFBdUIsNkJBQUE7QUFFN0I7O0FBRUU7RUFDSSxTQUFBO0VBQ0EsVUFBQTtBQUNOOztBQUNJO0VBQ0UsV0FBQTtFQUNBLFlBQUE7QUFFTjs7QUFBSTs7O0VBR0UscUJBQUE7R0NHSixlREZJO0VBQ0EsT0FBQTtFQUNBLG1CQUFBO0FBR047O0FBREk7RUFDRSxVQUFBO0FBSU47O0FBRkk7RUFDRSxzQkFBQTtFQUNBLFVBQUE7QUFLTjs7QUFISTtFQUNFLHNCQUFBO0VBQ0EsVUFBQTtBQU1OIiwiZmlsZSI6InNldHRpbmdzLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5sb2dvLWhlYWRlciB7XG4gICAgd2lkdGg6IDE3MHB4O1xuICBcbiAgICBoZWlnaHQ6IGF1dG87XG4gICAgZGlzcGxheTogYmxvY2s7XG4gICAgbWFyZ2luLWxlZnQ6IGF1dG87XG4gICAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICB9XG4gIC5oZWFkZXItb25lIHtcbiAgICAtLWJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC45KTtcbiAgICBib3gtc2hhZG93OiAwIDRweCA4cHggMCByZ2JhKDAsIDAsIDAsIDAuMiksIDAgNnB4IDIwcHggMCByZ2JhKDAsIDAsIDAsIDAuMTkpO1xuICB9XG4gIFxuICAubG9jay1pbWcge1xuICAgIGhlaWdodDogYXV0byAhaW1wb3J0YW50O1xuICAgIHdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgfVxuICBpb24taWNvbiB7XG4gICAgICBcbiAgICAgIGZvbnQtc2l6ZTogOTBweDtcbiAgICAgIGNvbG9yOiAgIzAwNjE3MjsgXG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICBwb3NpdGlvbjpyZWxhdGl2ZTtcbiAgICAgIHRvcDogY2FsYyg1MCUgLSAxMHB4KTsgLyogNTAlIC0gMy80IG9mIGljb24gaGVpZ2h0ICovXG4gIH1cbiAgXG4gIFxuICAjY29udGFpbmVyICoge1xuICAgICAgbWFyZ2luOiAwO1xuICAgICAgcGFkZGluZzogMDtcbiAgICB9XG4gICAgI2NvbnRhaW5lciB7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIGZvbnQtc2l6ZTogMDtcbiAgICB9XG4gICAgI2xlZnQsXG4gICAgI21pZGRsZSxcbiAgICAjcmlnaHQge1xuICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgKmRpc3BsYXk6IGlubGluZTtcbiAgICAgIHpvb206IDE7XG4gICAgICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xuICAgIH1cbiAgICAjbGVmdCB7XG4gICAgICB3aWR0aDogMjUlO1xuICAgIH1cbiAgICAjbWlkZGxlIHtcbiAgICAgIHZlcnRpY2FsLWFsaWduOiBib3R0b207XG4gICAgICB3aWR0aDogNjAlO1xuICAgIH1cbiAgICAjcmlnaHQge1xuICAgICAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcbiAgICAgIHdpZHRoOiAxNSU7XG4gICAgfSIsIi5sb2dvLWhlYWRlciB7XG4gIHdpZHRoOiAxNzBweDtcbiAgaGVpZ2h0OiBhdXRvO1xuICBkaXNwbGF5OiBibG9jaztcbiAgbWFyZ2luLWxlZnQ6IGF1dG87XG4gIG1hcmdpbi1yaWdodDogYXV0bztcbn1cblxuLmhlYWRlci1vbmUge1xuICAtLWJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC45KTtcbiAgYm94LXNoYWRvdzogMCA0cHggOHB4IDAgcmdiYSgwLCAwLCAwLCAwLjIpLCAwIDZweCAyMHB4IDAgcmdiYSgwLCAwLCAwLCAwLjE5KTtcbn1cblxuLmxvY2staW1nIHtcbiAgaGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7XG4gIHdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG59XG5cbmlvbi1pY29uIHtcbiAgZm9udC1zaXplOiA5MHB4O1xuICBjb2xvcjogIzAwNjE3MjtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIHRvcDogY2FsYyg1MCUgLSAxMHB4KTtcbiAgLyogNTAlIC0gMy80IG9mIGljb24gaGVpZ2h0ICovXG59XG5cbiNjb250YWluZXIgKiB7XG4gIG1hcmdpbjogMDtcbiAgcGFkZGluZzogMDtcbn1cblxuI2NvbnRhaW5lciB7XG4gIHdpZHRoOiAxMDAlO1xuICBmb250LXNpemU6IDA7XG59XG5cbiNsZWZ0LFxuI21pZGRsZSxcbiNyaWdodCB7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgKmRpc3BsYXk6IGlubGluZTtcbiAgem9vbTogMTtcbiAgdmVydGljYWwtYWxpZ246IHRvcDtcbn1cblxuI2xlZnQge1xuICB3aWR0aDogMjUlO1xufVxuXG4jbWlkZGxlIHtcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcbiAgd2lkdGg6IDYwJTtcbn1cblxuI3JpZ2h0IHtcbiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcbiAgd2lkdGg6IDE1JTtcbn0iXX0= */\";"],"sourceRoot":"webpack:///"}